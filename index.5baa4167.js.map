{"mappings":"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;CACnB,uBAAuB;CACvB,gBAAgB;CAChB,eAAe;CACf,YAAY;CACZ,qBAAqB;CACrB,kBAAkB;CAClB,aAAa;CACb,cAAc;CACd,kBAAkB;CAClB,eAAe;CACf,iBAAiB;CACjB,iBAAiB;CACjB,KAAK;;;;;;A,kD;A,iD;A,mD;A,iD;A,4C;A,4C;A,+C;A,kD;A,4C;A,6C;A,6C;A,+C;A,wD;A,0D;A,+C;A,yD;A,2D;A,oD;A,uD;A,qD;A,sD;A,uD;A,6D;A,I,Y,O,c;A,I,a,O,gB;A,I,oB,O,yB;A,I,sB,O,qB;A,I,e,O,S,C,c;A,I,e,O,S,C,oB;A,I,kB,C,K,K,Q,O,M,U,K,K;Q,Y;Q,c;Q,U;Q;I,K,G,C,I,G;A,I,iB,C,G;I,I,I,Q,K,C,I,C,C,E,I,a,I,C,G,O,gB,G,M,C,C,K;I,I,qB;Q,K,I,Q,oB,G,I,a,I,C,G,O,gB,G,M,C,C,K;I;I,O;A;A,I,gB,C,G,I,W,G,kB;A,I,gB,C,K,Q;I,I,C,O,G,C,M,M,U,Y;A;A,I,e,C,K,Q;I,c,K,Q;I,O,S,O,I,C,O,O,G,C;A;A,I,e,C,K,Q;I,I,O,G,C,M,M,U;I,kB,U,O,G,C,O,O,G,C,K;A;A,I,e,C,K,Q,O;I,c,K,Q;I,S,O,I,C,K,S,O,G,C,K;I,O;A;A,I,kB,C,K,Q;I,c,K,Q;I,O;A;A,I,U,C,Q,a;I,O,I,Q,C,S;Q,I,Y,C;Y,I;gB,K,U,I,C;Y,E,O,G;gB,O;Y;Q;Q,I,W,C;Y,I;gB,K,U,K,C;Y,E,O,G;gB,O;Y;Q;Q,I,O,C,I,E,I,G,Q,E,K,I,Q,O,C,E,K,E,I,C,W;Q,K,A,C,Y,U,K,C,Q,Y,E,I;I;A;A,wB;AE7LE,SAAS,cAAc,KAAA;IAC5B,MAAM,SAAS,MAAM,MAAA,CAAO,CAAC,IAAoC,CAAC,CAAC;IACnE,OAAO,MAAA,CAAO,CAAC,GAAG;QAChB,MAAM,OAAO,YAAY,IAAI,EAAE,MAAA,GAAS;QACxC,MAAM,QAAQ,WAAW,IAAI,EAAE,KAAA,GAAQ;QACvC,KAAK,OAAA,CAAQ;QACb,OAAO;IACT;IAEA,OAAO;QACL,OAAO,MAAA,CAAO,CAAC,GAAG;YAChB,MAAM,OAAO,YAAY,IAAI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A;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACF;A,mC;AC9LO,SAAS,2BAA2B,UAAA,EAAoB,GAAA;IAC7D,IAAI,WAAW,UAAA,CAAW,SAAS,OAAO,KAAP;IACnC,OAAO,CAAA,sCAAA,EAAyC,IAAG,CAAA,EAAI,WAAvD,UAAA,CAAA;AACF;AAOA,SAAsB,uBACpB,GAAA;IAC+B,OAAA,QAAA,IAAA,EAAA,MAAA;QAC/B,IAAI,CAAC,KAAK,OAAO,KAAP;QACV,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,IAAI,IAAI,MAAA,KAAW,KAAK;YAExB,MAAM,MAAM,MAAM,IAAI,IAAA;YACtB,MAAM,WAAqB,CAAC;YAC5B,MAAM,aAAa;YACnB,OAAO,IAAA,CAAK,KAAK,OAAA,CAAQ,CAAC;gBACxB,MAAM,OAAO,OAAO;gBACpB,IAAI,MAAM;oBACR,MAAM,UAAU,GAAA,CAAI,IAApB;oBACA,QAAA,CAAS,KAAI,GAAI;wBAAC,OAAA,CAAQ,EAAC,GAAI;wBAAY,OAAA,CAAQ,EAAC,GAAI;qBAAxD;gBACF;YACF;YACA,OAAO;QACT,EAAA,OAAS,KAAK;YACZ,OAAO,KAAP;QACF;IACF;AAAA;A,6B;ACjBO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;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;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;SACA;IAEjB;IACA;QACE,MAAM;QACN,WAAW;YAAC;YAAK;SADX;QAEN,SAAS;YACP;gBAAC;gBAAI;aADE;YAEP;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAI;aADQ;YAEb;gBAAC;gBAAI;aADO;YAEZ;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;YAEb;gBAAC;gBAAK;aADQ;YAEd;gBAAC;gBAAK;aADO;SACA;IAEjB;CACF;;;ACxeA,QAAQ,cAAc,GAAG,SAAU,CAAC;IAClC,OAAO,KAAK,EAAE,UAAU,GAAG,IAAI;QAAC,SAAS;IAAC;AAC5C;AAEA,QAAQ,iBAAiB,GAAG,SAAU,CAAC;IACrC,OAAO,cAAc,CAAC,GAAG,cAAc;QAAC,OAAO;IAAI;AACrD;AAEA,QAAQ,SAAS,GAAG,SAAU,MAAM,EAAE,IAAI;IACxC,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,SAAU,GAAG;QACvC,IACE,QAAQ,aACR,QAAQ,gBACR,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,MAE3C;QAGF,OAAO,cAAc,CAAC,MAAM,KAAK;YAC/B,YAAY;YACZ,KAAK;gBACH,OAAO,MAAM,CAAC,IAAI;YACpB;QACF;IACF;IAEA,OAAO;AACT;AAEA,QAAQ,MAAM,GAAG,SAAU,IAAI,EAAE,QAAQ,EAAE,GAAG;IAC5C,OAAO,cAAc,CAAC,MAAM,UAAU;QACpC,YAAY;QACZ,KAAK;IACP;AACF","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-41d88644928917ce.js","app.js","node_modules/smplr/dist/index.mjs","node_modules/smplr/src/player/connect.ts","node_modules/smplr/src/player/signals.ts","node_modules/smplr/src/player/volume.ts","node_modules/smplr/src/player/channel.ts","node_modules/smplr/src/player/sorted-queue.ts","node_modules/smplr/src/player/queued-player.ts","node_modules/smplr/src/player/sample-player.ts","node_modules/smplr/src/player/default-player.ts","node_modules/smplr/src/player/load-audio.ts","node_modules/smplr/src/storage.ts","node_modules/smplr/src/drum-machine/dm-instrument.ts","node_modules/smplr/src/drum-machine/drum-machine.ts","node_modules/smplr/src/player/midi.ts","node_modules/smplr/src/sfz/sfz-load.ts","node_modules/smplr/src/sfz/sfz-regions.ts","node_modules/smplr/src/sfz/sfz-sampler.ts","node_modules/smplr/src/tremolo.ts","node_modules/smplr/src/electric-piano.ts","node_modules/smplr/src/player/layers.ts","node_modules/smplr/src/player/region-player.ts","node_modules/smplr/src/sfz2.ts","node_modules/smplr/src/versilian.ts","node_modules/smplr/src/mallet.ts","node_modules/smplr/src/mellotron.ts","node_modules/smplr/src/reverb/processor.min.ts","node_modules/smplr/src/reverb/reverb.ts","node_modules/smplr/src/sampler.ts","node_modules/smplr/src/smolken.ts","node_modules/smplr/src/soundfont/soundfont-instrument.ts","node_modules/smplr/src/soundfont/soundfont-loops.ts","node_modules/smplr/src/soundfont/soundfont.ts","node_modules/smplr/src/splendid-grand-piano.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"138b6a135baa4167\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n    } catch (err) {\n      if (err.message) {\n        console.error(err.message);\n      }\n      ws = {};\n    }\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  if (ws instanceof WebSocket) {\n    ws.onerror = function (e) {\n      if (e.message) {\n        console.error(e.message);\n      }\n    };\n    ws.onclose = function () {\n      console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n    };\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","/**\n * Reference\n * smplr node package\n * https://github.com/danigb/smplr\n *\n * draws on this extensive library of sampled sound\n * https://github.com/smpldsnds\n *\n */\n\n\n// import smplr package\nimport {Soundfont, SplendidGrandPiano, DrumMachine, getDrumMachineNames} from \"smplr\";\n\n// create Audio context\nconst context = new AudioContext();\n\n//creating instruments\nconst marimba = new Soundfont(context, {instrument: \"marimba\"});\nconst piano =  new SplendidGrandPiano(context);\nconst flute = new Soundfont(context, {instrument: \"flute\"});\nconst cello= new Soundfont(context, {instrument: \"cello\"});\n\nconst allDrums = getDrumMachineNames();\nconst drums = new DrumMachine(context, {instrument: \"Casio-RZ1\"})\n\n//play notes attached to HTML buttons\ndocument.getElementById(\"marimba\").onclick = ()=>{\n    context.resume()\n    marimba.start({note: 60, velocity: 80});\n    setTimeout(()=>{marimba.stop(60)}, 1000)\n}\n\ndocument.getElementById(\"piano\").onclick = ()=>{\n    context.resume()\n    piano.start({note: 60, velocity: 80});\n    setTimeout(()=>{piano.stop(60)}, 1000)\n}\n\ndocument.getElementById(\"flute\").onclick = ()=>{\n    context.resume()\n    flute.start({note: 72, velocity: 80});\n    setTimeout(()=>{flute.stop(72)}, 1000)\n}\n\ndocument.getElementById(\"cello\").onclick = ()=>{\n    context.resume()\n    cello.start({note: 48, velocity: 80});\n    setTimeout(()=>{cello.stop(48)}, 1000)\n}\n\ndocument.getElementById(\"drums\").onclick = ()=>{\n    context.resume()\n    drums.start({note: \"kick\"});\n    drums.start({note: \"ride\"})\n    setTimeout(()=>{drums.start({note: \"snare\"}); drums.start({note: \"ride\"})}, 500)\n    setTimeout(()=>{drums.start({note: \"kick\"}); drums.start({note: \"ride\"})}, 1000)\n    setTimeout(()=>{drums.start({note: \"snare\"}); drums.start({note: \"ride\"})}, 1500)\n    setTimeout(()=>{drums.start({note: \"ride\"}); drums.start({note: \"ride\"})}, 2000)\n}\n\n\n\n\n\n//SOUNDFONT_INSTRUMENTS = [\n//   \"accordion\",\n//   \"acoustic_bass\",\n//   \"acoustic_grand_piano\",\n//   \"acoustic_guitar_nylon\",\n//   \"acoustic_guitar_steel\",\n//   \"agogo\",\n//   \"alto_sax\",\n//   \"applause\",\n//   \"bagpipe\",\n//   \"banjo\",\n//   \"baritone_sax\",\n//   \"bassoon\",\n//   \"bird_tweet\",\n//   \"blown_bottle\",\n//   \"brass_section\",\n//   \"breath_noise\",\n//   \"bright_acoustic_piano\",\n//   \"celesta\",\n//   \"cello\",\n//   \"choir_aahs\",\n//   \"church_organ\",\n//   \"clarinet\",\n//   \"clavinet\",\n//   \"contrabass\",\n//   \"distortion_guitar\",\n//   \"drawbar_organ\",\n//   \"dulcimer\",\n//   \"electric_bass_finger\",\n//   \"electric_bass_pick\",\n//   \"electric_grand_piano\",\n//   \"electric_guitar_clean\",\n//   \"electric_guitar_jazz\",\n//   \"electric_guitar_muted\",\n//   \"electric_piano_1\",\n//   \"electric_piano_2\",\n//   \"english_horn\",\n//   \"fiddle\",\n//   \"flute\",\n//   \"french_horn\",\n//   \"fretless_bass\",\n//   \"fx_1_rain\",\n//   \"fx_2_soundtrack\",\n//   \"fx_3_crystal\",\n//   \"fx_4_atmosphere\",\n//   \"fx_5_brightness\",\n//   \"fx_6_goblins\",\n//   \"fx_7_echoes\",\n//   \"fx_8_scifi\",\n//   \"glockenspiel\",\n//   \"guitar_fret_noise\",\n//   \"guitar_harmonics\",\n//   \"gunshot\",\n//   \"harmonica\",\n//   \"harpsichord\",\n//   \"helicopter\",\n//   \"honkytonk_piano\",\n//   \"kalimba\",\n//   \"koto\",\n//   \"lead_1_square\",\n//   \"lead_2_sawtooth\",\n//   \"lead_3_calliope\",\n//   \"lead_4_chiff\",\n//   \"lead_5_charang\",\n//   \"lead_6_voice\",\n//   \"lead_7_fifths\",\n//   \"lead_8_bass__lead\",\n//   \"marimba\",\n//   \"melodic_tom\",\n//   \"music_box\",\n//   \"muted_trumpet\",\n//   \"oboe\",\n//   \"ocarina\",\n//   \"orchestra_hit\",\n//   \"orchestral_harp\",\n//   \"overdriven_guitar\",\n//   \"pad_1_new_age\",\n//   \"pad_2_warm\",\n//   \"pad_3_polysynth\",\n//   \"pad_4_choir\",\n//   \"pad_5_bowed\",\n//   \"pad_6_metallic\",\n//   \"pad_7_halo\",\n//   \"pad_8_sweep\",\n//   \"pan_flute\",\n//   \"percussive_organ\",\n//   \"piccolo\",\n//   \"pizzicato_strings\",\n//   \"recorder\",\n//   \"reed_organ\",\n//   \"reverse_cymbal\",\n//   \"rock_organ\",\n//   \"seashore\",\n//   \"shakuhachi\",\n//   \"shamisen\",\n//   \"shanai\",\n//   \"sitar\",\n//   \"slap_bass_1\",\n//   \"slap_bass_2\",\n//   \"soprano_sax\",\n//   \"steel_drums\",\n//   \"string_ensemble_1\",\n//   \"string_ensemble_2\",\n//   \"synth_bass_1\",\n//   \"synth_bass_2\",\n//   \"synth_brass_1\",\n//   \"synth_brass_2\",\n//   \"synth_choir\",\n//   \"synth_drum\",\n//   \"synth_strings_1\",\n//   \"synth_strings_2\",\n//   \"taiko_drum\",\n//   \"tango_accordion\",\n//   \"telephone_ring\",\n//   \"tenor_sax\",\n//   \"timpani\",\n//   \"tinkle_bell\",\n//   \"tremolo_strings\",\n//   \"trombone\",\n//   \"trumpet\",\n//   \"tuba\",\n//   \"tubular_bells\",\n//   \"vibraphone\",\n//   \"viola\",\n//   \"violin\",\n//   \"voice_oohs\",\n//   \"whistle\",\n//   \"woodblock\",\n//   \"xylophone\",\n// ];",null,"export type AudioInsert = {\n  input: AudioNode;\n  output: AudioNode;\n};\n\nexport function connectSerial(nodes: (AudioNode | AudioInsert | undefined)[]) {\n  const _nodes = nodes.filter((x): x is AudioNode | AudioInsert => !!x);\n  _nodes.reduce((a, b) => {\n    const left = \"output\" in a ? a.output : a;\n    const right = \"input\" in b ? b.input : b;\n    left.connect(right);\n    return b;\n  });\n\n  return () => {\n    _nodes.reduce((a, b) => {\n      const left = \"output\" in a ? a.output : a;\n      const right = \"input\" in b ? b.input : b;\n      left.disconnect(right);\n      return b;\n    });\n  };\n}\n\nexport function connectAudioBus(\n  node: AudioNode,\n  destination: AudioNode,\n  gain: number\n) {\n  const mix = node.context.createGain();\n  mix.gain.value = gain;\n  node.connect(mix);\n  mix.connect(destination);\n\n  return () => {\n    node.disconnect(mix);\n    mix.disconnect(destination);\n  };\n}\n","/**\n * A function to unsubscribe from an event or control\n */\nexport type Unsubscribe = () => void;\n/**\n * A function that listener to event or control changes\n */\nexport type Listener<T> = (value: T) => void;\n/**\n * A function to subscribe an trigger or control events\n */\nexport type Subscribe<T> = (listener: Listener<T>) => Unsubscribe;\n\n/**\n * A trigger is a subscribable event\n */\nexport type Trigger<T> = {\n  subscribe: Subscribe<T>;\n  trigger: (event: T) => void;\n};\n\n/**\n * A control is a subscribable value\n */\nexport type Control<T> = {\n  subscribe: Subscribe<T>;\n  set: (value: T) => void;\n  get: () => T;\n};\n\n/**\n * Create a control signal\n * @param initialValue\n * @returns Control\n */\nexport function createControl<T>(initialValue: T): Control<T> {\n  let current = initialValue;\n  const listeners = new Set<Listener<T>>();\n\n  function subscribe(listener: Listener<T>) {\n    listeners.add(listener);\n    listener(current);\n    return () => {\n      listeners.delete(listener);\n    };\n  }\n\n  function set(value: T) {\n    current = value;\n    listeners.forEach((listener) => listener(current));\n  }\n\n  function get(): T {\n    return current;\n  }\n  return { subscribe, set, get };\n}\n\nexport function createTrigger<T>(): Trigger<T> {\n  const listeners = new Set<Listener<T>>();\n\n  function subscribe(listener: Listener<T>) {\n    listeners.add(listener);\n    return () => {\n      listeners.delete(listener);\n    };\n  }\n\n  function trigger(value: T) {\n    listeners.forEach((listener) => listener(value));\n  }\n\n  return { subscribe, trigger };\n}\n\nexport function unsubscribeAll(unsubscribe: Array<Unsubscribe | undefined>) {\n  let done = false;\n  return () => {\n    if (done) return;\n    done = true;\n    unsubscribe.forEach((cb) => cb?.());\n  };\n}\n","/// This is how the MIDI association converts midi velocity [0..127] into gain [0..1]\n/// @see https://www.midi.org/specifications/file-format-specifications/dls-downloadable-sounds/dls-level-1\nexport function midiVelToGain(vel: number) {\n  return (vel * vel) / 16129; // 16129 = 127 * 127\n}\n\nexport function dbToGain(decibels: number) {\n  return Math.pow(10, decibels / 20);\n}\n","import { AudioInsert, connectSerial } from \"./connect\";\nimport { createControl } from \"./signals\";\nimport { midiVelToGain } from \"./volume\";\n\nexport type ChannelConfig = {\n  destination: AudioNode;\n  volume: number;\n  volumeToGain: (volume: number) => number;\n};\n\nexport type OutputChannel = Omit<Channel, \"input\">;\n\ntype Send = {\n  name: string;\n  mix: GainNode;\n  disconnect: () => void;\n};\n\n/**\n * An output channel with audio effects\n * @private\n */\nexport class Channel {\n  public readonly setVolume: (vol: number) => void;\n  public readonly input: AudioNode;\n\n  #volume: GainNode;\n  #sends?: Send[];\n  #inserts?: (AudioNode | AudioInsert)[];\n  #disconnect: () => void;\n  #unsubscribe: () => void;\n  #config: Readonly<ChannelConfig>;\n  #disconnected = false;\n\n  constructor(\n    public readonly context: BaseAudioContext,\n    options?: Partial<ChannelConfig>\n  ) {\n    this.#config = {\n      destination: options?.destination ?? context.destination,\n      volume: options?.volume ?? 100,\n      volumeToGain: options?.volumeToGain ?? midiVelToGain,\n    };\n\n    this.input = context.createGain();\n    this.#volume = context.createGain();\n\n    this.#disconnect = connectSerial([\n      this.input,\n      this.#volume,\n      this.#config.destination,\n    ]);\n\n    const volume = createControl(this.#config.volume);\n    this.setVolume = volume.set;\n    this.#unsubscribe = volume.subscribe((volume) => {\n      this.#volume.gain.value = this.#config.volumeToGain(volume);\n    });\n  }\n\n  addInsert(effect: AudioNode | AudioInsert) {\n    if (this.#disconnected) {\n      throw Error(\"Can't add insert to disconnected channel\");\n    }\n    this.#inserts ??= [];\n    this.#inserts.push(effect);\n    this.#disconnect();\n    this.#disconnect = connectSerial([\n      this.input,\n      ...this.#inserts,\n      this.#volume,\n      this.#config.destination,\n    ]);\n  }\n\n  addEffect(\n    name: string,\n    effect: AudioNode | { input: AudioNode },\n    mixValue: number\n  ) {\n    if (this.#disconnected) {\n      throw Error(\"Can't add effect to disconnected channel\");\n    }\n    const mix = this.context.createGain();\n    mix.gain.value = mixValue;\n    const input = \"input\" in effect ? effect.input : effect;\n    const disconnect = connectSerial([this.#volume, mix, input]);\n\n    this.#sends ??= [];\n    this.#sends.push({ name, mix, disconnect });\n  }\n\n  sendEffect(name: string, mix: number) {\n    if (this.#disconnected) {\n      throw Error(\"Can't send effect to disconnected channel\");\n    }\n\n    const send = this.#sends?.find((send) => send.name === name);\n    if (send) {\n      send.mix.gain.value = mix;\n    } else {\n      console.warn(\"Send bus not found: \" + name);\n    }\n  }\n\n  disconnect() {\n    if (this.#disconnected) return;\n    this.#disconnected = true;\n    this.#disconnect();\n    this.#unsubscribe();\n    this.#sends?.forEach((send) => send.disconnect());\n    this.#sends = undefined;\n  }\n}\n","/**\n * A sorted items that uses binary search to insert items in sorted order.\n * @private\n */\nexport class SortedQueue<T> {\n  #items: T[] = [];\n  constructor(public readonly compare: (a: T, b: T) => number) {}\n\n  push(item: T) {\n    const len = this.#items.length;\n\n    let left = 0;\n    let right = len - 1;\n    let index = len;\n\n    while (left <= right) {\n      const mid = Math.floor((left + right) / 2);\n      if (this.compare(item, this.#items[mid]) < 0) {\n        index = mid;\n        right = mid - 1;\n      } else {\n        left = mid + 1;\n      }\n    }\n\n    this.#items.splice(index, 0, item);\n  }\n\n  pop() {\n    return this.#items.shift();\n  }\n\n  peek(): T | undefined {\n    return this.#items[0];\n  }\n\n  removeAll(predicate: (item: T) => boolean) {\n    const len = this.#items.length;\n    this.#items = this.#items.filter((item) => !predicate(item));\n    return this.#items.length !== len;\n  }\n\n  clear() {\n    this.#items = [];\n  }\n\n  size() {\n    return this.#items.length;\n  }\n}\n","import { SortedQueue } from \"./sorted-queue\";\nimport { InternalPlayer, SampleStart, SampleStop } from \"./types\";\n\ntype SampleStartWithTime = SampleStart & { time: number };\n\nfunction compose<T>(a?: (x: T) => void, b?: (x: T) => void) {\n  return a && b\n    ? (x: T) => {\n        a(x);\n        b(x);\n      }\n    : a ?? b;\n}\n\nexport type QueuedPlayerConfig = {\n  scheduleLookaheadMs: number;\n  scheduleIntervalMs: number;\n  onStart?: (sample: SampleStart) => void;\n  onEnded?: (sample: SampleStart) => void;\n};\n\nfunction getConfig(options: Partial<QueuedPlayerConfig>) {\n  const config: QueuedPlayerConfig = {\n    scheduleLookaheadMs: options.scheduleLookaheadMs ?? 200,\n    scheduleIntervalMs: options.scheduleIntervalMs ?? 50,\n    onStart: options.onStart,\n    onEnded: options.onEnded,\n  };\n\n  if (config.scheduleLookaheadMs < 1) {\n    throw Error(\"scheduleLookaheadMs must be greater than 0\");\n  }\n  if (config.scheduleIntervalMs < 1) {\n    throw Error(\"scheduleIntervalMs must be greater than 0\");\n  }\n  if (config.scheduleLookaheadMs < config.scheduleIntervalMs) {\n    throw Error(\"scheduleLookaheadMs must be greater than scheduleIntervalMs\");\n  }\n\n  return config;\n}\n\n/**\n * A SamplePlayer that queues up samples to be played in the future.\n *\n * @private\n */\nexport class QueuedPlayer implements InternalPlayer {\n  private readonly player: InternalPlayer;\n  #config: QueuedPlayerConfig;\n  #queue: SortedQueue<SampleStartWithTime>;\n  #intervalId: NodeJS.Timeout | undefined;\n\n  public constructor(\n    player: InternalPlayer,\n    options: Partial<QueuedPlayerConfig> = {}\n  ) {\n    this.#config = getConfig(options);\n\n    this.#queue = new SortedQueue<SampleStartWithTime>(\n      (a, b) => a.time - b.time\n    );\n    this.player = player;\n  }\n\n  get context() {\n    return this.player.context;\n  }\n\n  get buffers() {\n    return this.player.buffers;\n  }\n\n  get isRunning() {\n    return this.#intervalId !== undefined;\n  }\n\n  start(sample: SampleStart) {\n    const context = this.player.context;\n    const now = context.currentTime;\n    const startAt = sample.time ?? now;\n    const lookAhead = this.#config.scheduleLookaheadMs / 1000;\n    sample.onStart = compose(sample.onStart, this.#config.onStart);\n    sample.onEnded = compose(sample.onEnded, this.#config.onEnded);\n\n    if (startAt < now + lookAhead) {\n      return this.player.start(sample);\n    }\n    this.#queue.push({ ...sample, time: startAt });\n\n    if (!this.#intervalId) {\n      this.#intervalId = setInterval(() => {\n        const nextTick = context.currentTime + lookAhead;\n        while (this.#queue.size() && this.#queue.peek()!.time <= nextTick) {\n          const sample = this.#queue.pop();\n          if (sample) {\n            this.player.start(sample);\n          }\n        }\n        if (!this.#queue.size()) {\n          clearInterval(this.#intervalId!);\n          this.#intervalId = undefined;\n        }\n      }, this.#config.scheduleIntervalMs);\n    }\n\n    return (time?: number) => {\n      if (!time || time < startAt) {\n        if (!this.#queue.removeAll((item) => item === sample)) {\n          this.player.stop({ ...sample, time });\n        }\n      } else {\n        this.player.stop({ ...sample, time });\n      }\n    };\n  }\n\n  stop(sample?: SampleStop) {\n    this.player.stop(sample);\n\n    if (!sample) {\n      this.#queue.clear();\n      return;\n    }\n\n    const time = sample?.time ?? 0;\n    const stopId = sample?.stopId;\n    if (stopId) {\n      this.#queue.removeAll((item) =>\n        item.time >= time && item.stopId\n          ? item.stopId === stopId\n          : item.note === stopId\n      );\n    } else {\n      this.#queue.removeAll((item) => item.time >= time);\n    }\n  }\n\n  disconnect() {\n    this.player.disconnect();\n  }\n}\n","import { connectSerial } from \"./connect\";\nimport { AudioBuffers } from \"./load-audio\";\nimport { Trigger, createTrigger, unsubscribeAll } from \"./signals\";\nimport {\n  InternalPlayer,\n  SampleOptions,\n  SampleStart,\n  SampleStop,\n} from \"./types\";\nimport { midiVelToGain } from \"./volume\";\n\nexport type SamplePlayerConfig = {\n  velocityToGain: (velocity: number) => number;\n  destination: AudioNode;\n} & SampleOptions;\n\n/**\n * A sample player. This is used internally by the Sampler.\n *\n * @private Not intended for public use\n */\nexport class SamplePlayer implements InternalPlayer {\n  public readonly buffers: AudioBuffers;\n  #config: SamplePlayerConfig;\n  #disconnected = false;\n  #stop: Trigger<SampleStop | undefined>;\n\n  public constructor(\n    public readonly context: BaseAudioContext,\n    private readonly options: Partial<SamplePlayerConfig>\n  ) {\n    this.#config = {\n      velocityToGain: options.velocityToGain ?? midiVelToGain,\n      destination: options.destination ?? context.destination,\n    };\n    this.buffers = {};\n    this.#stop = createTrigger();\n  }\n\n  public start(sample: SampleStart) {\n    if (this.#disconnected) {\n      throw new Error(\"Can't start a sample on disconnected player\");\n    }\n    const context = this.context;\n    const buffer =\n      (sample.name && this.buffers[sample.name]) || this.buffers[sample.note];\n    if (!buffer) {\n      console.warn(`Sample not found: '${sample.note}'`);\n      return () => undefined;\n    }\n\n    const source = context.createBufferSource();\n    source.buffer = buffer;\n\n    // Seems that detune is not implemented in Safari (and therefore, in standardized-audio-context)\n    const cents = sample.detune ?? this.options.detune ?? 0;\n    if (source.detune) {\n      source.detune.value = cents;\n    } else if (source.playbackRate) {\n      source.playbackRate.value = Math.pow(2, cents / 1200);\n    }\n\n    // Low pass filter\n    const lpfCutoffHz = sample.lpfCutoffHz ?? this.options.lpfCutoffHz;\n    const lpf = lpfCutoffHz ? context.createBiquadFilter() : undefined;\n    if (lpfCutoffHz && lpf) {\n      lpf.type = \"lowpass\";\n      lpf.frequency.value = lpfCutoffHz;\n    }\n\n    // Sample volume\n    const volume = context.createGain();\n    const velocity = sample.velocity ?? this.options.velocity ?? 100;\n    volume.gain.value = this.#config.velocityToGain(velocity);\n\n    const loop = sample.loop ?? this.options.loop;\n    if (loop) {\n      source.loop = true;\n      source.loopStart = sample.loopStart ?? 0;\n      source.loopEnd = sample.loopEnd ?? buffer.duration;\n    }\n\n    // Stop with decay\n    const decayTime = sample.decayTime ?? this.options.decayTime;\n    const [decay, startDecay] = createDecayEnvelope(context, decayTime);\n    function stop(time?: number) {\n      time ??= context.currentTime;\n      if (time <= startAt) {\n        source.stop(time);\n      } else {\n        const stopAt = startDecay(time);\n        source.stop(stopAt);\n      }\n    }\n\n    // Compensate gain\n    const gainCompensation = sample.gainOffset\n      ? context.createGain()\n      : undefined;\n    if (gainCompensation && sample.gainOffset) {\n      gainCompensation.gain.value = sample.gainOffset;\n    }\n\n    const stopId = sample.stopId ?? sample.note;\n    const cleanup = unsubscribeAll([\n      connectSerial([\n        source,\n        lpf,\n        volume,\n        decay,\n        gainCompensation,\n        this.#config.destination,\n      ]),\n      sample.stop?.(stop),\n      this.#stop.subscribe((event) => {\n        if (!event || event.stopId === undefined || event.stopId === stopId) {\n          stop(event?.time);\n        }\n      }),\n    ]);\n    source.onended = () => {\n      cleanup();\n      sample.onEnded?.(sample);\n    };\n\n    sample.onStart?.(sample);\n    const startAt = Math.max(sample.time ?? 0, context.currentTime);\n    source.start(sample.time);\n\n    let duration = sample.duration ?? buffer.duration;\n    if (typeof sample.duration == \"number\") {\n      stop(startAt + duration);\n    }\n\n    return stop;\n  }\n\n  stop(sample?: SampleStop) {\n    this.#stop.trigger(sample);\n  }\n\n  public disconnect() {\n    if (this.#disconnected) return;\n    this.#disconnected = true;\n    this.stop();\n    Object.keys(this.buffers).forEach((key) => {\n      delete this.buffers[key];\n    });\n  }\n\n  public get connected() {\n    return !this.#disconnected;\n  }\n}\n\nfunction createDecayEnvelope(\n  context: BaseAudioContext,\n  envelopeTime = 0.2\n): [AudioNode, (time: number) => number] {\n  let stopAt = 0;\n  const envelope = context.createGain();\n  envelope.gain.value = 1.0;\n\n  function start(time: number): number {\n    if (stopAt) return stopAt;\n    envelope.gain.cancelScheduledValues(time);\n    const envelopeAt = time || context.currentTime;\n    stopAt = envelopeAt + envelopeTime;\n    envelope.gain.setValueAtTime(1.0, envelopeAt);\n    envelope.gain.linearRampToValueAtTime(0, stopAt);\n\n    return stopAt;\n  }\n\n  return [envelope, start];\n}\n","import { SamplerConfig } from \"../sampler\";\nimport { Channel, ChannelConfig, OutputChannel } from \"./channel\";\nimport { QueuedPlayer, QueuedPlayerConfig } from \"./queued-player\";\nimport { SamplePlayer } from \"./sample-player\";\nimport { InternalPlayer, SampleStart, SampleStop } from \"./types\";\n\nexport type DefaultPlayerConfig = ChannelConfig &\n  SamplerConfig &\n  QueuedPlayerConfig;\n\n/**\n * Player used by instruments\n * @private\n */\nexport class DefaultPlayer implements InternalPlayer {\n  public readonly output: OutputChannel;\n  private readonly player: InternalPlayer;\n\n  constructor(\n    public readonly context: BaseAudioContext,\n    options?: Partial<DefaultPlayerConfig>\n  ) {\n    const channel = new Channel(context, options);\n    this.player = new QueuedPlayer(\n      new SamplePlayer(context, { ...options, destination: channel.input }),\n      options\n    );\n    this.output = channel;\n  }\n\n  get buffers() {\n    return this.player.buffers;\n  }\n\n  public start(sample: SampleStart) {\n    return this.player.start(sample);\n  }\n\n  public stop(sample?: SampleStop | string | number) {\n    this.player.stop(\n      typeof sample === \"object\"\n        ? sample\n        : sample !== undefined\n        ? { stopId: sample }\n        : undefined\n    );\n  }\n\n  disconnect() {\n    this.output.disconnect();\n    this.player.disconnect();\n  }\n}\n","import { Storage } from \"../storage\";\n\nexport type AudioBuffers = Record<string | number, AudioBuffer | undefined>;\n\n/**\n * A function that downloads audio into a AudioBuffers\n */\nexport type AudioBuffersLoader = (\n  context: BaseAudioContext,\n  buffers: AudioBuffers\n) => Promise<void>;\n\nexport async function loadAudioBuffer(\n  context: BaseAudioContext,\n  url: string,\n  storage: Storage\n): Promise<AudioBuffer | undefined> {\n  url = url.replace(/#/g, \"%23\").replace(/([^:]\\/)\\/+/g, \"$1\");\n  const response = await storage.fetch(url);\n  if (response.status !== 200) {\n    console.warn(\n      \"Error loading buffer. Invalid status: \",\n      response.status,\n      url\n    );\n    return;\n  }\n  try {\n    const audioData = await response.arrayBuffer();\n    const buffer = await context.decodeAudioData(audioData);\n    return buffer;\n  } catch (error) {\n    console.warn(\"Error loading buffer\", error, url);\n  }\n}\n\nexport function findFirstSupportedFormat(formats: string[]): string | null {\n  if (typeof document === \"undefined\") return null;\n\n  const audio = document.createElement(\"audio\");\n  for (let i = 0; i < formats.length; i++) {\n    const format = formats[i];\n    const canPlay = audio.canPlayType(`audio/${format}`);\n    if (canPlay === \"probably\" || canPlay === \"maybe\") {\n      return format;\n    }\n    // check Safari for aac format\n    if (format === \"m4a\") {\n      const canPlay = audio.canPlayType(`audio/aac`);\n      if (canPlay === \"probably\" || canPlay === \"maybe\") {\n        return format;\n      }\n    }\n  }\n  return null;\n}\n\nexport function getPreferredAudioExtension() {\n  const format = findFirstSupportedFormat([\"ogg\", \"m4a\"]) ?? \"ogg\";\n  return \".\" + format;\n}\n","export type StorageResponse = {\n  readonly status: number;\n  arrayBuffer(): Promise<ArrayBuffer>;\n  json(): Promise<any>;\n  text(): Promise<string>;\n};\n\nexport type Storage = {\n  fetch: (url: string) => Promise<StorageResponse>;\n};\n\nexport const HttpStorage: Storage = {\n  fetch(url) {\n    return fetch(url);\n  },\n};\n\nexport class CacheStorage implements Storage {\n  #cache: Promise<Cache>;\n\n  constructor(name = \"smplr\") {\n    if (typeof window === \"undefined\" || !(\"caches\" in window)) {\n      this.#cache = Promise.reject(\"CacheStorage not supported\");\n    } else {\n      this.#cache = caches.open(name);\n    }\n  }\n\n  async fetch(url: string): Promise<StorageResponse> {\n    const request = new Request(url);\n    try {\n      return await this.#tryFromCache(request);\n    } catch (err) {\n      const response = await fetch(request);\n      await this.#saveResponse(request, response);\n      return response;\n    }\n  }\n\n  async #tryFromCache(request: Request): Promise<StorageResponse> {\n    const cache = await this.#cache;\n    const response = await cache.match(request);\n    if (response) return response;\n    else throw Error(\"Not found\");\n  }\n\n  async #saveResponse(request: Request, response: Response) {\n    try {\n      const cache = await this.#cache;\n      await cache.put(request, response.clone());\n    } catch (err) {}\n  }\n}\n","import { Storage } from \"../storage\";\n\nexport type DrumMachineInstrument = {\n  baseUrl: string;\n  name: string;\n  samples: string[];\n  sampleNames: string[];\n  nameToSample: Record<string, string | undefined>;\n  sampleNameVariations: Record<string, string[]>;\n};\nexport const EMPTY_INSTRUMENT: DrumMachineInstrument = {\n  baseUrl: \"\",\n  name: \"\",\n  samples: [],\n  sampleNames: [],\n  nameToSample: {},\n  sampleNameVariations: {},\n};\n\nexport async function fetchDrumMachineInstrument(\n  url: string,\n  storage: Storage\n): Promise<DrumMachineInstrument> {\n  const res = await storage.fetch(url);\n  const json = await res.json();\n  // need to fix json\n  json.baseUrl = url.replace(\"/dm.json\", \"\");\n  json.sampleNames = [];\n  json.nameToSample = {};\n  json.sampleNameVariations = {};\n  for (const sampleSrc of json.samples) {\n    const sample =\n      sampleSrc.indexOf(\"/\") !== -1 ? sampleSrc : sampleSrc.replace(\"-\", \"/\");\n    json.nameToSample[sample] = sample;\n    const [base, variation] = sample.split(\"/\");\n    if (!json.sampleNames.includes(base)) {\n      json.sampleNames.push(base);\n    }\n    json.nameToSample[base] ??= sample;\n    json.sampleNameVariations[base] ??= [];\n    if (variation) {\n      json.sampleNameVariations[base].push(`${base}/${variation}`);\n    }\n  }\n\n  return json;\n}\n","import { OutputChannel } from \"../player/channel\";\nimport { DefaultPlayer, DefaultPlayerConfig } from \"../player/default-player\";\nimport {\n  AudioBuffers,\n  findFirstSupportedFormat,\n  loadAudioBuffer,\n} from \"../player/load-audio\";\nimport { SampleStart, SampleStop } from \"../player/types\";\nimport { HttpStorage, Storage } from \"../storage\";\nimport {\n  DrumMachineInstrument,\n  EMPTY_INSTRUMENT,\n  fetchDrumMachineInstrument,\n} from \"./dm-instrument\";\n\nexport function getDrumMachineNames() {\n  return Object.keys(INSTRUMENTS);\n}\n\nconst INSTRUMENTS: Record<string, string> = {\n  \"TR-808\": \"https://danigb.github.io/samples/drum-machines/TR-808/dm.json\",\n  \"Casio-RZ1\":\n    \"https://danigb.github.io/samples/drum-machines/Casio-RZ1/dm.json\",\n  \"LM-2\": \"https://danigb.github.io/samples/drum-machines/LM-2/dm.json\",\n  \"MFB-512\": \"https://danigb.github.io/samples/drum-machines/MFB-512/dm.json\",\n  \"Roland CR-8000\":\n    \"https://danigb.github.io/samples/drum-machines/Roland-CR-8000/dm.json\",\n};\n\ntype DrumMachineConfig = {\n  instrument: string;\n  url: string;\n  storage: Storage;\n};\n\nexport type DrumMachineOptions = Partial<\n  DrumMachineConfig & DefaultPlayerConfig\n>;\n\nfunction getConfig(options?: DrumMachineOptions): DrumMachineConfig {\n  const config = {\n    instrument: options?.instrument ?? \"TR-808\",\n    storage: options?.storage ?? HttpStorage,\n    url: options?.url ?? \"\",\n  };\n  config.url ||= INSTRUMENTS[config.instrument];\n  if (!config.url) throw new Error(\"Invalid instrument: \" + config.instrument);\n\n  return config;\n}\n\nexport class DrumMachine {\n  #instrument = EMPTY_INSTRUMENT;\n  private readonly player: DefaultPlayer;\n  public readonly load: Promise<this>;\n  public readonly output: OutputChannel;\n\n  public constructor(context: AudioContext, options?: DrumMachineOptions) {\n    const config = getConfig(options);\n\n    const instrument = fetchDrumMachineInstrument(config.url, config.storage);\n    this.player = new DefaultPlayer(context, options);\n    this.output = this.player.output;\n    this.load = drumMachineLoader(\n      context,\n      this.player.buffers,\n      instrument,\n      config.storage\n    ).then(() => this);\n\n    instrument.then((instrument) => {\n      this.#instrument = instrument;\n    });\n  }\n\n  async loaded() {\n    console.warn(\"deprecated: use load instead\");\n    return this.load;\n  }\n\n  get sampleNames(): string[] {\n    return this.#instrument.sampleNames;\n  }\n\n  getVariations(name: string): string[] {\n    return this.#instrument.sampleNameVariations[name] ?? [];\n  }\n\n  start(sample: SampleStart) {\n    const sampleName = this.#instrument.nameToSample[sample.note];\n    return this.player.start({\n      ...sample,\n      note: sampleName ? sampleName : sample.note,\n      stopId: sample.stopId ?? sample.note,\n    });\n  }\n\n  stop(sample: SampleStop) {\n    return this.player.stop(sample);\n  }\n}\n\nfunction drumMachineLoader(\n  context: BaseAudioContext,\n  buffers: AudioBuffers,\n  instrument: Promise<DrumMachineInstrument>,\n  storage: Storage\n) {\n  const format = findFirstSupportedFormat([\"ogg\", \"m4a\"]) ?? \"ogg\";\n  return instrument.then((data) =>\n    Promise.all(\n      data.samples.map(async (sample) => {\n        const url = `${data.baseUrl}/${sample}.${format}`;\n        const sampleName =\n          sample.indexOf(\"/\") !== -1 ? sample : sample.replace(\"-\", \"/\");\n        const buffer = await loadAudioBuffer(context, url, storage);\n        if (buffer) buffers[sampleName] = buffer;\n      })\n    )\n  );\n}\n","function noteNameToMidi(note: string): number | undefined {\n  const REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|)(-?\\d+)$/;\n  const m = REGEX.exec(note);\n  if (!m) return;\n  const letter = m[1].toUpperCase();\n  if (!letter) return;\n\n  const acc = m[2];\n  const alt = acc[0] === \"b\" ? -acc.length : acc.length;\n  const oct = m[3] ? +m[3] : 4;\n\n  const step = (letter.charCodeAt(0) + 3) % 7;\n  return [0, 2, 4, 5, 7, 9, 11][step] + alt + 12 * (oct + 1);\n}\n\nexport function toMidi(note: string | number | undefined): number | undefined {\n  return note === undefined\n    ? undefined\n    : typeof note === \"number\"\n    ? note\n    : noteNameToMidi(note);\n}\n\nexport function findNearestMidi(\n  midi: number,\n  isAvailable: Record<string | number, unknown>\n): [number, number] {\n  let i = 0;\n  while (isAvailable[midi + i] === undefined && i < 128) {\n    if (i > 0) i = -i;\n    else i = -i + 1;\n  }\n\n  return i === 127 ? [midi, 0] : [midi + i, -i * 100];\n}\n","import {\n  AudioBuffers,\n  findFirstSupportedFormat,\n  loadAudioBuffer,\n} from \"../player/load-audio\";\nimport { Storage } from \"../storage\";\nimport { SfzInstrument } from \"./sfz-kits\";\nimport { Websfz, WebsfzGroup } from \"./websfz\";\n\nexport async function loadSfzBuffers(\n  context: AudioContext,\n  buffers: AudioBuffers,\n  websfz: Websfz,\n  storage: Storage\n) {\n  websfz.groups.forEach((group) => {\n    const urls = getWebsfzGroupUrls(websfz, group);\n    return loadAudioBuffers(context, buffers, urls, storage);\n  });\n}\n\nexport async function SfzInstrumentLoader(\n  instrument: string | Websfz | SfzInstrument,\n  storage: Storage\n): Promise<Websfz> {\n  const isWebsfz = (inst: any): inst is Websfz => \"global\" in inst;\n  const isSfzInstrument = (inst: any): inst is SfzInstrument =>\n    \"websfzUrl\" in inst;\n\n  if (typeof instrument === \"string\") {\n    return fetchWebSfz(instrument, storage);\n  } else if (isWebsfz(instrument)) {\n    return instrument;\n  } else if (isSfzInstrument(instrument)) {\n    const websfz = await fetchWebSfz(instrument.websfzUrl, storage);\n    websfz.meta ??= {};\n    if (instrument.name) websfz.meta.name = instrument.name;\n    if (instrument.baseUrl) websfz.meta.baseUrl = instrument.baseUrl;\n    if (instrument.formats) websfz.meta.formats = instrument.formats;\n    return websfz;\n  } else {\n    throw new Error(\"Invalid instrument: \" + JSON.stringify(instrument));\n  }\n}\n\n// @private\nasync function loadAudioBuffers(\n  context: AudioContext,\n  buffers: AudioBuffers,\n  urls: Record<string, string>,\n  storage: Storage\n) {\n  await Promise.all(\n    Object.keys(urls).map(async (sampleId) => {\n      if (buffers[sampleId]) return;\n\n      const buffer = await loadAudioBuffer(context, urls[sampleId], storage);\n      if (buffer) buffers[sampleId] = buffer;\n      return buffers;\n    })\n  );\n}\n\n// @private\nasync function fetchWebSfz(url: string, storage: Storage): Promise<Websfz> {\n  try {\n    const response = await fetch(url);\n    const json = await response.json();\n    return json as Websfz;\n  } catch (error) {\n    console.warn(`Can't load SFZ file ${url}`, error);\n    throw new Error(`Can't load SFZ file ${url}`);\n  }\n}\n\n// @private\nexport function getWebsfzGroupUrls(websfz: Websfz, group: WebsfzGroup) {\n  const urls: Record<string, string> = {};\n  const baseUrl = websfz.meta.baseUrl ?? \"\";\n  const format = findFirstSupportedFormat(websfz.meta.formats ?? []) ?? \"ogg\";\n\n  const prefix = websfz.global[\"default_path\"] ?? \"\";\n\n  if (!group) return urls;\n\n  return group.regions.reduce((urls, region) => {\n    if (region.sample) {\n      urls[region.sample] = `${baseUrl}/${prefix}${region.sample}.${format}`;\n    }\n    return urls;\n  }, urls);\n}\n","import { Websfz, WebsfzGroup, WebsfzRegion } from \"./websfz\";\n\nfunction checkRange(value?: number, low?: number, hi?: number) {\n  const isAboveLow = low === undefined || (value !== undefined && value >= low);\n  const isBelowHi = hi === undefined || (value !== undefined && value <= hi);\n  return isAboveLow && isBelowHi;\n}\n\nexport function findRegions(\n  websfz: Websfz,\n  note: { midi?: number; velocity?: number; cc64?: number }\n): [WebsfzGroup, WebsfzRegion][] {\n  const regions: [WebsfzGroup, WebsfzRegion][] = [];\n  for (const group of websfz.groups) {\n    if (\n      checkRange(note.midi, group.lokey, group.hikey) &&\n      checkRange(note.velocity, group.lovel, group.hivel) &&\n      checkRange(note.cc64, group.locc64, group.hicc64)\n    ) {\n      for (const region of group.regions) {\n        if (\n          checkRange(note.midi, region.lokey, region.hikey) &&\n          checkRange(note.velocity, region.lovel, region.hivel) &&\n          checkRange(note.cc64, group.locc64, group.hicc64)\n        ) {\n          regions.push([group, region]);\n        }\n      }\n    }\n  }\n  return regions;\n}\n","import { DefaultPlayer, DefaultPlayerConfig } from \"../player/default-player\";\nimport { toMidi } from \"../player/midi\";\nimport { SampleStart, SampleStop } from \"../player/types\";\nimport { HttpStorage, Storage } from \"../storage\";\nimport { SfzInstrument } from \"./sfz-kits\";\nimport { SfzInstrumentLoader, loadSfzBuffers } from \"./sfz-load\";\nimport { findRegions } from \"./sfz-regions\";\nimport { Websfz } from \"./websfz\";\n\nexport type SfzSamplerConfig = {\n  instrument: SfzInstrument | Websfz | string;\n  storage: Storage;\n  destination: AudioNode;\n  volume: number;\n  velocity: number;\n  detune: number;\n  decayTime?: number;\n  lpfCutoffHz?: number;\n};\n\nconst EMPTY_WEBSFZ: Websfz = Object.freeze({\n  meta: {},\n  global: {},\n  groups: [],\n});\n\nexport class SfzSampler {\n  public readonly options: Readonly<SfzSamplerConfig>;\n  private readonly player: DefaultPlayer;\n  #websfz: Websfz;\n  public readonly load: Promise<this>;\n\n  constructor(\n    public readonly context: AudioContext,\n    options: Partial<SfzSamplerConfig & DefaultPlayerConfig> &\n      Pick<SfzSamplerConfig, \"instrument\">\n  ) {\n    this.options = Object.freeze(\n      Object.assign(\n        {\n          volume: 100,\n          velocity: 100,\n          storage: HttpStorage,\n          detune: 0,\n          destination: context.destination,\n        },\n        options\n      )\n    );\n    this.player = new DefaultPlayer(context, options);\n    this.#websfz = EMPTY_WEBSFZ;\n\n    this.load = SfzInstrumentLoader(options.instrument, this.options.storage)\n      .then((result) => {\n        this.#websfz = Object.freeze(result);\n        return loadSfzBuffers(\n          context,\n          this.player.buffers,\n          this.#websfz,\n          this.options.storage\n        );\n      })\n      .then(() => this);\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  async loaded() {\n    console.warn(\"deprecated: use load instead\");\n    return this.load;\n  }\n\n  start(sample: SampleStart | string | number) {\n    this.#startLayers(typeof sample === \"object\" ? sample : { note: sample });\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    this.player.stop(sample);\n  }\n\n  disconnect() {\n    this.player.disconnect();\n  }\n\n  #startLayers(sample: SampleStart) {\n    const midi = toMidi(sample.note);\n    if (midi === undefined) return () => undefined;\n\n    const velocity = sample.velocity ?? this.options.velocity;\n    const regions = findRegions(this.#websfz, { midi, velocity });\n\n    const onEnded = () => {\n      sample.onEnded?.(sample);\n    };\n\n    const stopAll = regions.map(([group, region]) => {\n      let target = region.pitch_keycenter ?? region.key ?? midi;\n      const detune = (midi - target) * 100;\n      return this.player.start({\n        ...sample,\n        note: region.sample,\n        decayTime: sample.decayTime,\n        detune: detune + (sample.detune ?? this.options.detune),\n        onEnded,\n        stopId: midi,\n      });\n    });\n\n    switch (stopAll.length) {\n      case 0:\n        return () => undefined;\n      case 1:\n        return stopAll[0];\n      default:\n        return (time?: number) => stopAll.forEach((stop) => stop(time));\n    }\n  }\n}\n","import { AudioInsert } from \"./player/connect\";\nimport { Subscribe } from \"./player/signals\";\n\n// @private\nexport function createTremolo(\n  context: AudioContext,\n  depth: Subscribe<number>\n): AudioInsert {\n  const input = context.createGain();\n  const output = context.createGain();\n\n  // force mono sources to be stereo\n  input.channelCount = 2;\n  input.channelCountMode = \"explicit\";\n\n  const splitter = context.createChannelSplitter(2);\n  const ampL = context.createGain();\n  const ampR = context.createGain();\n  const merger = context.createChannelMerger(2);\n\n  const lfoL = context.createOscillator();\n  lfoL.type = \"sine\";\n  lfoL.frequency.value = 1;\n  lfoL.start();\n  const lfoLAmp = context.createGain();\n  const lfoR = context.createOscillator();\n  lfoR.type = \"sine\";\n  lfoR.frequency.value = 1.1;\n  lfoR.start();\n  const lfoRAmp = context.createGain();\n\n  input.connect(splitter);\n  splitter.connect(ampL, 0);\n  splitter.connect(ampR, 1);\n  ampL.connect(merger, 0, 0);\n  ampR.connect(merger, 0, 1);\n  lfoL.connect(lfoLAmp);\n  lfoLAmp.connect(ampL.gain);\n  lfoR.connect(lfoRAmp);\n  lfoRAmp.connect(ampR.gain);\n  merger.connect(output);\n\n  const unsubscribe = depth((depth) => {\n    lfoLAmp.gain.value = depth;\n    lfoRAmp.gain.value = depth;\n  });\n\n  input.disconnect = () => {\n    unsubscribe();\n    lfoL.stop();\n    lfoR.stop();\n    input.disconnect(splitter);\n    splitter.disconnect(ampL, 0);\n    splitter.disconnect(ampR, 1);\n    ampL.disconnect(merger, 0, 0);\n    ampR.disconnect(merger, 0, 1);\n    lfoL.disconnect(ampL);\n    lfoR.disconnect(ampR);\n    merger.disconnect(output);\n  };\n\n  return { input, output };\n}\n","import { createControl } from \"./player/signals\";\nimport { midiVelToGain } from \"./player/volume\";\nimport { SfzSampler, SfzSamplerConfig } from \"./sfz/sfz-sampler\";\nimport { createTremolo } from \"./tremolo\";\n\nexport function getElectricPianoNames() {\n  return Object.keys(INSTRUMENTS);\n}\n\nconst INSTRUMENTS: Record<string, string> = {\n  CP80: \"https://danigb.github.io/samples/gs-e-pianos/CP80/cp80.websfz.json\",\n  PianetT:\n    \"https://danigb.github.io/samples/gs-e-pianos/Pianet T/pianet-t.websfz.json\",\n  WurlitzerEP200:\n    \"https://danigb.github.io/samples/gs-e-pianos/Wurlitzer EP200/wurlitzer-ep200.websfz.json\",\n  TX81Z:\n    \"https://danigb.github.io/samples/vcsl/TX81Z/tx81z-fm-piano.websfz.json\",\n};\n\nexport class ElectricPiano extends SfzSampler {\n  public readonly tremolo: Readonly<{ level: (value: number) => void }>;\n  constructor(\n    context: AudioContext,\n    options: Partial<SfzSamplerConfig> & { instrument: string }\n  ) {\n    super(context, {\n      ...options,\n      instrument: INSTRUMENTS[options.instrument] ?? options.instrument,\n    });\n    const depth = createControl(0);\n    this.tremolo = {\n      level: (level) => depth.set(midiVelToGain(level)),\n    };\n    const tremolo = createTremolo(context, depth.subscribe);\n    this.output.addInsert(tremolo);\n  }\n}\n","import { toMidi } from \"./midi\";\nimport { RegionGroup, SampleOptions, SampleRegion, SampleStart } from \"./types\";\nimport { dbToGain } from \"./volume\";\n\nexport function createEmptyRegionGroup(\n  sample: Partial<SampleOptions> = {}\n): RegionGroup {\n  return { regions: [], sample };\n}\n\nexport function findSamplesInRegions(\n  group: RegionGroup,\n  sample: SampleStart,\n  seqNumber?: number\n): SampleStart[] {\n  const results: SampleStart[] = [];\n  const midi = toMidi(sample.note);\n  if (midi === undefined) return results;\n\n  for (const region of group.regions) {\n    const found = findSampleInRegion(\n      midi,\n      seqNumber ?? 0,\n      sample,\n      region,\n      group.sample\n    );\n    if (found) results.push(found);\n  }\n  return results;\n}\n\nexport function findFirstSampleInRegions(\n  group: RegionGroup,\n  sample: SampleStart,\n  seqNumber?: number\n): SampleStart | undefined {\n  const midi = toMidi(sample.note);\n\n  if (midi === undefined) return undefined;\n\n  for (const region of group.regions) {\n    const found = findSampleInRegion(\n      midi,\n      seqNumber ?? 0,\n      sample,\n      region,\n      group.sample\n    );\n    if (found) return found;\n  }\n  return undefined;\n}\n\nfunction findSampleInRegion(\n  midi: number,\n  seqNum: number,\n  sample: SampleStart,\n  region: SampleRegion,\n  defaults: Partial<SampleOptions>\n): SampleStart | undefined {\n  const matchMidi =\n    midi >= (region.midiLow ?? 0) && midi <= (region.midiHigh ?? 127);\n  if (!matchMidi) return undefined;\n  const matchVelocity =\n    sample.velocity === undefined ||\n    (sample.velocity >= (region.velLow ?? 0) &&\n      sample.velocity <= (region.velHigh ?? 127));\n  if (!matchVelocity) return undefined;\n\n  if (region.seqLength) {\n    const currentSeq = seqNum % region.seqLength;\n    const regionIndex = (region.seqPosition ?? 1) - 1;\n    if (currentSeq !== regionIndex) return undefined;\n  }\n\n  const semitones = midi - region.midiPitch;\n  const velocity = sample.velocity ?? defaults.velocity;\n  const regionGainOffset = region.volume ? dbToGain(region.volume) : 0;\n  const sampleGainOffset = sample.gainOffset ?? defaults.gainOffset ?? 0;\n  return {\n    decayTime:\n      sample?.decayTime ?? region.sample?.decayTime ?? defaults.decayTime,\n    detune: 100 * (semitones + (region.tune ?? 0)),\n    duration: sample?.duration ?? region.sample?.duration ?? defaults.duration,\n    gainOffset: sampleGainOffset + regionGainOffset || undefined,\n    loop: sample?.loop ?? region.sample?.loop ?? defaults.loop,\n    loopEnd: sample?.loopEnd ?? region.sample?.loopEnd ?? defaults.loopEnd,\n    loopStart:\n      sample?.loopStart ?? region.sample?.loopStart ?? defaults.loopStart,\n    lpfCutoffHz:\n      sample?.lpfCutoffHz ?? region.sample?.lpfCutoffHz ?? defaults.lpfCutoffHz,\n    name: region.sampleName,\n    note: midi,\n    onEnded: sample.onEnded,\n    onStart: sample.onStart,\n    stopId: sample.name,\n    time: sample.time,\n    velocity: velocity == undefined ? undefined : velocity,\n  };\n}\n\nexport function spreadRegions(regions: SampleRegion[]) {\n  if (regions.length === 0) return [];\n  regions.sort((a, b) => a.midiPitch - b.midiPitch);\n  regions[0].midiLow = 0;\n  regions[0].midiHigh = 127;\n  if (regions.length === 1) return regions;\n\n  for (let i = 1; i < regions.length; i++) {\n    const prev = regions[i - 1];\n    const curr = regions[i];\n    const mid = Math.floor((prev.midiPitch + curr.midiPitch) / 2);\n    prev.midiHigh = mid;\n    curr.midiLow = mid + 1;\n  }\n  regions[regions.length - 1].midiHigh = 127;\n\n  return regions;\n}\n","import { Channel, ChannelConfig, OutputChannel } from \"./channel\";\nimport { createEmptyRegionGroup, findSamplesInRegions } from \"./layers\";\nimport { toMidi } from \"./midi\";\nimport { QueuedPlayer, QueuedPlayerConfig } from \"./queued-player\";\nimport { SamplePlayer } from \"./sample-player\";\nimport {\n  InternalPlayer,\n  RegionGroup,\n  SampleOptions,\n  SampleStart,\n  SampleStop,\n} from \"./types\";\n\ntype PlayerOptions = ChannelConfig & SampleOptions & QueuedPlayerConfig;\n\n/**\n * A player with an channel output and a region group to read samples info from\n * @private\n */\nexport class RegionPlayer implements InternalPlayer {\n  public readonly output: OutputChannel;\n  public readonly group: RegionGroup;\n  private readonly player: InternalPlayer;\n  private seqNum = 0;\n\n  constructor(\n    public readonly context: BaseAudioContext,\n    options: Partial<PlayerOptions>\n  ) {\n    const channel = new Channel(context, options);\n    this.group = createEmptyRegionGroup();\n    this.player = new QueuedPlayer(\n      new SamplePlayer(context, { ...options, destination: channel.input }),\n      options\n    );\n    this.output = channel;\n  }\n\n  get buffers() {\n    return this.player.buffers;\n  }\n\n  start(sample: SampleStart | string | number) {\n    const found = findSamplesInRegions(\n      this.group,\n      typeof sample === \"object\" ? sample : { note: sample },\n      this.seqNum\n    );\n    this.seqNum++;\n    const stopAll = found.map((sample) => this.player.start(sample));\n    return (time?: number) => stopAll.forEach((stop) => stop(time));\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    if (sample == undefined) {\n      this.player.stop();\n      return;\n    }\n\n    const toStop = typeof sample === \"object\" ? sample : { stopId: sample };\n    const midi = toMidi(toStop.stopId);\n    if (!midi) return;\n    toStop.stopId = midi;\n    this.player.stop(toStop);\n  }\n\n  disconnect() {\n    this.output.disconnect();\n    this.player.disconnect();\n  }\n}\n","import {\n  AudioBuffers,\n  getPreferredAudioExtension,\n  loadAudioBuffer,\n} from \"./player/load-audio\";\nimport { RegionGroup, SampleRegion } from \"./player/types\";\nimport { Storage } from \"./storage\";\n\nexport type SfzLoaderConfig = {\n  urlFromSampleName: (sampleName: string, audioExt: string) => string;\n  buffers: AudioBuffers;\n  group: RegionGroup;\n};\n\nexport function SfzInstrumentLoader(url: string, config: SfzLoaderConfig) {\n  const audioExt = getPreferredAudioExtension();\n\n  return async (context: BaseAudioContext, storage: Storage) => {\n    const sfz = await fetch(url).then((res) => res.text());\n    const errors = sfzToLayer(sfz, config.group);\n    if (errors.length) {\n      console.warn(\"Problems converting sfz\", errors);\n    }\n    const sampleNames = new Set<string>();\n    config.group.regions.forEach((r) => sampleNames.add(r.sampleName));\n    return Promise.all(\n      Array.from(sampleNames).map(async (sampleName) => {\n        const sampleUrl = config.urlFromSampleName(sampleName, audioExt);\n        const buffer = await loadAudioBuffer(context, sampleUrl, storage);\n        config.buffers[sampleName] = buffer;\n      })\n    );\n  };\n}\n\nexport function sfzToLayer(sfz: string, group: RegionGroup) {\n  let mode = \"global\";\n  const tokens = sfz\n    .split(\"\\n\")\n    .map(parseToken)\n    .filter((x): x is Token => !!x);\n\n  const scope = new Scope();\n  let errors: (string | undefined)[] = [];\n\n  for (const token of tokens) {\n    switch (token.type) {\n      case \"mode\":\n        errors.push(scope.closeScope(mode, group));\n        mode = token.value;\n\n        break;\n\n      case \"prop:num\":\n      case \"prop:str\":\n      case \"prop:num_arr\":\n        scope.push(token.key, token.value);\n        break;\n\n      case \"unknown\":\n        console.warn(\"Unknown SFZ token\", token.value);\n        break;\n    }\n  }\n  closeScope(mode, scope, group);\n\n  return errors.filter((x) => !!x) as string[];\n\n  function closeScope(mode: string, scope: Scope, group: RegionGroup) {}\n}\n\ntype Token =\n  | { type: \"unknown\"; value: string }\n  | { type: \"mode\"; value: string }\n  | { type: \"prop:num\"; key: string; value: number }\n  | { type: \"prop:num_arr\"; key: string; value: [number, number] }\n  | { type: \"prop:str\"; key: string; value: string };\n\nconst MODE_REGEX = /^<([^>]+)>$/;\nconst PROP_NUM_REGEX = /^([^=]+)=([-\\.\\d]+)$/;\nconst PROP_STR_REGEX = /^([^=]+)=(.+)$/;\nconst PROP_NUM_ARR_REGEX = /^([^=]+)_(\\d+)=(\\d+)$/;\nfunction parseToken(line: string): Token | undefined {\n  line = line.trim();\n  if (line === \"\") return undefined;\n  if (line.startsWith(\"//\")) return undefined;\n\n  const modeMatch = line.match(MODE_REGEX);\n  if (modeMatch) return { type: \"mode\", value: modeMatch[1] };\n\n  const propNumArrMatch = line.match(PROP_NUM_ARR_REGEX);\n  if (propNumArrMatch)\n    return {\n      type: \"prop:num_arr\",\n      key: propNumArrMatch[1],\n      value: [Number(propNumArrMatch[2]), Number(propNumArrMatch[3])],\n    };\n\n  const propNumMatch = line.match(PROP_NUM_REGEX);\n  if (propNumMatch)\n    return {\n      type: \"prop:num\",\n      key: propNumMatch[1],\n      value: Number(propNumMatch[2]),\n    };\n\n  const propStrMatch = line.match(PROP_STR_REGEX);\n  if (propStrMatch)\n    return {\n      type: \"prop:str\",\n      key: propStrMatch[1],\n      value: propStrMatch[2],\n    };\n\n  return { type: \"unknown\", value: line };\n}\n\ntype DestKey = keyof SampleRegion | \"ignore\";\n\nclass Scope {\n  values: Record<string, any> = {};\n  global: Partial<SampleRegion> = {};\n  group: Partial<SampleRegion> = {};\n\n  closeScope(mode: string, group: RegionGroup) {\n    if (mode === \"global\") {\n      // Save global properties\n      this.#closeRegion(this.global as SampleRegion);\n    } else if (mode === \"group\") {\n      // Save group properties\n      this.group = this.#closeRegion({} as SampleRegion);\n    } else if (mode === \"region\") {\n      const region = this.#closeRegion({\n        sampleName: \"\",\n        midiPitch: -1,\n        ...this.global,\n        ...this.group,\n      });\n\n      if (region.sampleName === \"\") {\n        return \"Missing sample name\";\n      }\n      if (region.midiPitch === -1) {\n        // By default, if pitch_keycenter is not specified, the sampler will often use the value\n        // of lokey as the pitch key center.\n        if (region.midiLow !== undefined) {\n          region.midiPitch = region.midiLow;\n        } else {\n          return \"Missing pitch_keycenter\";\n        }\n      }\n\n      // Set default sequence number\n      if (region.seqLength && region.seqPosition === undefined) {\n        region.seqPosition = 1;\n      }\n\n      // Move amp_release to sample options\n      if (region.ampRelease) {\n        region.sample = { decayTime: region.ampRelease };\n        delete region.ampRelease;\n      }\n      group.regions.push(region);\n    }\n  }\n\n  #closeRegion(region: SampleRegion) {\n    this.popStr(\"sample\", region, \"sampleName\");\n    this.popNum(\"pitch_keycenter\", region, \"midiPitch\");\n\n    this.popNum(\"ampeg_attack\", region, \"ampAttack\");\n    this.popNum(\"ampeg_release\", region, \"ampRelease\");\n    this.popNum(\"bend_down\", region, \"bendDown\");\n    this.popNum(\"bend_up\", region, \"bendUp\");\n    this.popNum(\"group\", region, \"group\");\n    this.popNum(\"hikey\", region, \"midiHigh\");\n    this.popNum(\"hivel\", region, \"velHigh\");\n    this.popNum(\"lokey\", region, \"midiLow\");\n    this.popNum(\"offset\", region, \"offset\");\n    this.popNum(\"lovel\", region, \"velLow\");\n    this.popNum(\"off_by\", region, \"groupOffBy\");\n    this.popNum(\"pitch_keytrack\", region, \"ignore\");\n    this.popNum(\"seq_length\", region, \"seqLength\");\n    this.popNum(\"seq_position\", region, \"seqPosition\");\n    this.popNum(\"tune\", region, \"tune\");\n    this.popNum(\"volume\", region, \"volume\");\n    this.popNumArr(\"amp_velcurve\", region, \"ampVelCurve\");\n\n    // Enable only this while development\n    // const remainingKeys = Object.keys(this.values);\n    // if (remainingKeys.length) {\n    //   console.warn(\"Remaining keys in scope: \", remainingKeys);\n    // }\n    this.values = {};\n    return region;\n  }\n\n  get empty() {\n    return Object.keys(this.values).length === 0;\n  }\n\n  get keys() {\n    return Object.keys(this.values);\n  }\n\n  push(key: string, value: any) {\n    this.values[key] = value;\n  }\n\n  popNum(key: string, dest: Record<string, any>, destKey: DestKey): boolean {\n    if (typeof this.values[key] !== \"number\") return false;\n    dest[destKey] = this.values[key];\n    delete this.values[key];\n    return true;\n  }\n\n  popStr(key: string, dest: Record<string, any>, destKey: DestKey): boolean {\n    if (typeof this.values[key] !== \"string\") return false;\n    dest[destKey] = this.values[key];\n    delete this.values[key];\n    return true;\n  }\n\n  popNumArr(key: string, dest: Record<string, any>, destKey: DestKey): boolean {\n    if (!Array.isArray(this.values[key])) return false;\n    dest[destKey] = this.values[key];\n    delete this.values[key];\n    return true;\n  }\n}\n","import { DefaultPlayerConfig } from \"./player/default-player\";\nimport { AudioBuffers } from \"./player/load-audio\";\nimport { RegionPlayer } from \"./player/region-player\";\nimport {\n  InternalPlayer,\n  RegionGroup,\n  SampleStart,\n  SampleStop,\n} from \"./player/types\";\nimport { SfzInstrumentLoader } from \"./sfz2\";\nimport { HttpStorage, Storage } from \"./storage\";\n\nlet instruments: string[] = [];\n\nconst BASE_URL = \"https://smpldsnds.github.io/sgossner-vcsl/\";\n\nexport async function getVersilianInstruments(): Promise<string[]> {\n  if (instruments.length) return instruments;\n\n  instruments = await fetch(BASE_URL + \"sfz_files.json\").then((res) =>\n    res.json()\n  );\n  return instruments;\n}\n\nfunction getVcslInstrumentSfzUrl(instrument: string) {\n  return BASE_URL + instrument + \".sfz\";\n}\n\nexport function VcslInstrumentLoader(\n  instrument: string,\n  buffers: AudioBuffers,\n  group: RegionGroup\n) {\n  const url = getVcslInstrumentSfzUrl(instrument);\n  const base = instrument.slice(0, instrument.lastIndexOf(\"/\") + 1);\n  const sampleBase = `https://smpldsnds.github.io/sgossner-vcsl/${base}`;\n  return SfzInstrumentLoader(url, {\n    buffers: buffers,\n    group: group,\n    urlFromSampleName: (sampleName, audioExt) => {\n      return sampleBase + \"/\" + sampleName.replace(\".wav\", audioExt);\n    },\n  });\n}\n\nexport type VersilianConfig = {\n  instrument: string;\n  storage: Storage;\n};\nexport type VersilianOptions = Partial<VersilianConfig & DefaultPlayerConfig>;\n\n/**\n * Versilian\n *\n * The Versilian Community Sample Library is an open CC0 general-purpose sample library created by Versilian Studios LLC\n * for the purpose of introducing a set of quality, publicly available samples suitable for use in software and media of all kinds.\n */\nexport class Versilian implements InternalPlayer {\n  private readonly player: RegionPlayer;\n  public readonly load: Promise<this>;\n  private config: VersilianConfig;\n\n  constructor(context: BaseAudioContext, options: VersilianOptions = {}) {\n    this.config = {\n      instrument: options.instrument ?? \"Arco\",\n      storage: options.storage ?? HttpStorage,\n    };\n    this.player = new RegionPlayer(context, options);\n\n    const loader = VcslInstrumentLoader(\n      this.config.instrument,\n      this.player.buffers,\n      this.player.group\n    );\n    this.load = loader(context, this.config.storage).then(() => this);\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  get buffers(): AudioBuffers {\n    return this.player.buffers;\n  }\n\n  get context(): BaseAudioContext {\n    return this.player.context;\n  }\n\n  start(sample: SampleStart | string | number) {\n    return this.player.start(sample);\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    return this.player.stop(sample);\n  }\n\n  disconnect(): void {\n    this.player.disconnect();\n  }\n}\n","import { Versilian, VersilianOptions } from \"./versilian\";\n\nexport function getMalletNames() {\n  return Object.keys(NAME_TO_PATH) as MalletName[];\n}\n\nexport class Mallet extends Versilian {\n  constructor(context: AudioContext, options: VersilianOptions) {\n    super(context, {\n      ...options,\n      instrument: NAME_TO_PATH[options.instrument ?? \"\"],\n    });\n  }\n}\n\nconst BASE_URL = \"https://danigb.github.io/samples/vcsl/\";\nconst EXT = \".websfz.json\";\n\ntype MalletName = keyof typeof NAME_TO_PATH;\n\nexport const NAME_TO_PATH: Record<string, string | undefined> = {\n  \"Balafon - Hard Mallet\": \"Idiophones/Struck Idiophones/Balafon - Hard Mallet\",\n  \"Balafon - Keyswitch\": \"Idiophones/Struck Idiophones/Balafon - Keyswitch\",\n  \"Balafon - Soft Mallet\": \"Idiophones/Struck Idiophones/Balafon - Soft Mallet\",\n  \"Balafon - Traditional Mallet\":\n    \"Idiophones/Struck Idiophones/Balafon - Traditional Mallet\",\n\n  \"Tubular Bells 1\": \"Idiophones/Struck Idiophones/Tubular Bells 1\",\n  \"Tubular Bells 2\": \"Idiophones/Struck Idiophones/Tubular Bells 2\",\n\n  \"Vibraphone - Bowed\": \"Idiophones/Struck Idiophones/Vibraphone - Bowed\",\n  \"Vibraphone - Hard Mallets\":\n    \"Idiophones/Struck Idiophones/Vibraphone - Hard Mallets\",\n  \"Vibraphone - Keyswitch\":\n    \"Idiophones/Struck Idiophones/Vibraphone - Keyswitch\",\n  \"Vibraphone - Soft Mallets\":\n    \"Idiophones/Struck Idiophones/Vibraphone - Soft Mallets\",\n\n  \"Xylophone - Hard Mallets\":\n    \"Idiophones/Struck Idiophones/Xylophone - Hard Mallets\",\n  \"Xylophone - Keyswitch\": \"Idiophones/Struck Idiophones/Xylophone - Keyswitch\",\n  \"Xylophone - Medium Mallets\":\n    \"Idiophones/Struck Idiophones/Xylophone - Medium Mallets\",\n  \"Xylophone - Soft Mallets\":\n    \"Idiophones/Struck Idiophones/Xylophone - Soft Mallets\",\n} as const;\n","import { ChannelConfig } from \"./player/channel\";\nimport { DefaultPlayer, DefaultPlayerConfig } from \"./player/default-player\";\nimport {\n  createEmptyRegionGroup,\n  findFirstSampleInRegions,\n  spreadRegions,\n} from \"./player/layers\";\nimport {\n  AudioBuffers,\n  getPreferredAudioExtension,\n  loadAudioBuffer,\n} from \"./player/load-audio\";\nimport { toMidi } from \"./player/midi\";\nimport {\n  InternalPlayer,\n  RegionGroup,\n  SampleOptions,\n  SampleStart,\n  SampleStop,\n} from \"./player/types\";\nimport { HttpStorage, Storage } from \"./storage\";\n\nconst INSTRUMENT_VARIATIONS: Record<string, [string, string]> = {\n  \"300 STRINGS CELLO\": [\"300 STRINGS\", \"CELL\"],\n  \"300 STRINGS VIOLA\": [\"300 STRINGS\", \"VIOL\"],\n};\n\nexport function getMellotronNames() {\n  return [\n    \"300 STRINGS CELLO\",\n    \"300 STRINGS VIOLA\",\n    \"8VOICE CHOIR\",\n    \"BASSA+STRNGS\",\n    \"BOYS CHOIR\",\n    \"CHA CHA FLT\",\n    \"CHM CLARINET\",\n    \"CHMB 3 VLNS\",\n    \"CHMB ALTOSAX\",\n    \"CHMB FEMALE\",\n    \"CHMB MALE VC\",\n    \"CHMB TNR SAX\",\n    \"CHMB TRMBONE\",\n    \"CHMB TRUMPET\",\n    \"CHMBLN CELLO\",\n    \"CHMBLN FLUTE\",\n    \"CHMBLN OBOE\",\n    \"DIXIE+TRMBN\",\n    \"FOXTROT+SAX\",\n    \"HALFSP.BRASS\",\n    \"MIXED STRGS\",\n    \"MKII BRASS\",\n    \"MKII GUITAR\",\n    \"MKII ORGAN\",\n    \"MKII SAX\",\n    \"MKII VIBES\",\n    \"MKII VIOLINS\",\n    \"MOVE BS+STGS\",\n    \"STRGS+BRASS\",\n    \"TROMB+TRMPT\",\n    \"TRON 16VLNS\",\n    \"TRON CELLO\",\n    \"TRON FLUTE\",\n    \"TRON VIOLA\",\n  ];\n}\n\nexport type MellotronConfig = {\n  instrument: string;\n  storage: Storage;\n};\n\nexport type MellotronOptions = Partial<MellotronConfig & DefaultPlayerConfig>;\n\nexport class Mellotron implements InternalPlayer {\n  private readonly config: MellotronConfig;\n  private readonly player: DefaultPlayer;\n  private readonly group: RegionGroup;\n  readonly load: Promise<this>;\n\n  public constructor(\n    public readonly context: BaseAudioContext,\n    options: MellotronOptions\n  ) {\n    this.config = getMellotronConfig(options);\n    this.player = new DefaultPlayer(context, options);\n    this.group = createEmptyRegionGroup(options);\n\n    const loader = loadMellotronInstrument(\n      this.config.instrument,\n      this.player.buffers,\n      this.group\n    );\n    this.load = loader(context, this.config.storage).then(() => this);\n  }\n\n  get buffers() {\n    return this.player.buffers;\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  start(sample: SampleStart | string | number) {\n    const found = findFirstSampleInRegions(\n      this.group,\n      typeof sample === \"object\" ? sample : { note: sample }\n    );\n\n    if (!found) return () => undefined;\n\n    return this.player.start(found);\n  }\n  stop(sample?: SampleStop | string | number) {\n    this.player.stop(sample);\n  }\n  disconnect() {\n    this.player.disconnect();\n  }\n}\n\nfunction getMellotronConfig(\n  options: Partial<SampleOptions & ChannelConfig & MellotronConfig>\n): MellotronConfig {\n  return {\n    instrument: options.instrument ?? \"MKII VIOLINS\",\n    storage: options.storage ?? HttpStorage,\n  };\n}\nfunction loadMellotronInstrument(\n  instrument: string,\n  buffers: AudioBuffers,\n  group: RegionGroup\n) {\n  let variation = INSTRUMENT_VARIATIONS[instrument];\n  if (variation) instrument = variation[0];\n\n  return (context: BaseAudioContext, storage: Storage) => {\n    const baseUrl = `https://smpldsnds.github.io/archiveorg-mellotron/${instrument}/`;\n    const audioExt = getPreferredAudioExtension();\n    return fetch(baseUrl + \"files.json\")\n      .then((res) => res.json() as Promise<string[]>)\n      .then((sampleNames) =>\n        Promise.all(\n          sampleNames.map((sampleName) => {\n            if (variation && !sampleName.includes(variation[1])) return;\n\n            const midi = toMidi(sampleName.split(\" \")[0] ?? \"\");\n            if (!midi) return;\n\n            const sampleUrl = baseUrl + sampleName + audioExt;\n            loadAudioBuffer(context, sampleUrl, storage).then((audioBuffer) => {\n              buffers[sampleName] = audioBuffer;\n              const duration = audioBuffer?.duration ?? 0;\n              group.regions.push({\n                sampleName: sampleName,\n                midiPitch: midi,\n                sample: {\n                  loop: true,\n                  loopStart: duration / 10,\n                  loopEnd: duration - duration / 10,\n                },\n              });\n            });\n          })\n        )\n      )\n      .then(() => {\n        spreadRegions(group.regions);\n      });\n  };\n}\n","export const PROCESSOR = `\"use strict\";(()=>{var f=class extends AudioWorkletProcessor{_pDLength;_preDelay;_pDWrite;_lp1;_lp2;_lp3;_excPhase;_taps;_Delays;sampleRate;static get parameterDescriptors(){return[[\"preDelay\",0,0,sampleRate-1,\"k-rate\"],[\"bandwidth\",.9999,0,1,\"k-rate\"],[\"inputDiffusion1\",.75,0,1,\"k-rate\"],[\"inputDiffusion2\",.625,0,1,\"k-rate\"],[\"decay\",.5,0,1,\"k-rate\"],[\"decayDiffusion1\",.7,0,.999999,\"k-rate\"],[\"decayDiffusion2\",.5,0,.999999,\"k-rate\"],[\"damping\",.005,0,1,\"k-rate\"],[\"excursionRate\",.5,0,2,\"k-rate\"],[\"excursionDepth\",.7,0,2,\"k-rate\"],[\"wet\",1,0,1,\"k-rate\"],[\"dry\",0,0,1,\"k-rate\"]].map(e=>new Object({name:e[0],defaultValue:e[1],minValue:e[2],maxValue:e[3],automationRate:e[4]}))}constructor(e){super(),this.sampleRate=sampleRate,this._Delays=[],this._pDLength=sampleRate+(128-sampleRate%128),this._preDelay=new Float32Array(this._pDLength),this._pDWrite=0,this._lp1=0,this._lp2=0,this._lp3=0,this._excPhase=0,[.004771345,.003595309,.012734787,.009307483,.022579886,.149625349,.060481839,.1249958,.030509727,.141695508,.089244313,.106280031].forEach(a=>this.makeDelay(a,sampleRate)),this._taps=Int16Array.from([.008937872,.099929438,.064278754,.067067639,.066866033,.006283391,.035818689,.011861161,.121870905,.041262054,.08981553,.070931756,.011256342,.004065724],a=>Math.round(a*sampleRate))}makeDelay(e,a){let t=Math.round(e*a),s=2**Math.ceil(Math.log2(t));this._Delays.push([new Float32Array(s),t-1,0,s-1])}writeDelay(e,a){return this._Delays[e][0][this._Delays[e][1]]=a}readDelay(e){return this._Delays[e][0][this._Delays[e][2]]}readDelayAt(e,a){let t=this._Delays[e];return t[0][t[2]+a&t[3]]}readDelayCAt(e,a){let t=this._Delays[e],s=a-~~a,d=~~a+t[2]-1,r=t[3],D=t[0][d++&r],l=t[0][d++&r],h=t[0][d++&r],y=t[0][d&r],u=(3*(l-h)-D+y)/2,m=2*h+D-(5*l+y)/2,c=(h-D)/2;return((u*s+m)*s+c)*s+l}process(e,a,t){let s=~~t.preDelay[0],d=t.bandwidth[0],r=t.inputDiffusion1[0],D=t.inputDiffusion2[0],l=t.decay[0],h=t.decayDiffusion1[0],y=t.decayDiffusion2[0],u=1-t.damping[0],m=t.excursionRate[0]/sampleRate,c=t.excursionDepth[0]*sampleRate/1e3,w=t.wet[0]*.6,A=t.dry[0];if(e[0].length==2)for(let i=127;i>=0;i--)this._preDelay[this._pDWrite+i]=(e[0][0][i]+e[0][1][i])*.5,a[0][0][i]=e[0][0][i]*A,a[0][1][i]=e[0][1][i]*A;else if(e[0].length>0){this._preDelay.set(e[0][0],this._pDWrite);for(let i=127;i>=0;i--)a[0][0][i]=a[0][1][i]=e[0][0][i]*A}else this._preDelay.set(new Float32Array(128),this._pDWrite);let o=0;for(;o<128;){let i=0,b=0;this._lp1+=d*(this._preDelay[(this._pDLength+this._pDWrite-s+o)%this._pDLength]-this._lp1);let p=this.writeDelay(0,this._lp1-r*this.readDelay(0));p=this.writeDelay(1,r*(p-this.readDelay(1))+this.readDelay(0)),p=this.writeDelay(2,r*p+this.readDelay(1)-D*this.readDelay(2)),p=this.writeDelay(3,D*(p-this.readDelay(3))+this.readDelay(2));let k=D*p+this.readDelay(3),g=c*(1+Math.cos(this._excPhase*6.28)),x=c*(1+Math.sin(this._excPhase*6.2847)),_=this.writeDelay(4,k+l*this.readDelay(11)+h*this.readDelayCAt(4,g));this.writeDelay(5,this.readDelayCAt(4,g)-h*_),this._lp2+=u*(this.readDelay(5)-this._lp2),_=this.writeDelay(6,l*this._lp2-y*this.readDelay(6)),this.writeDelay(7,this.readDelay(6)+y*_),_=this.writeDelay(8,k+l*this.readDelay(7)+h*this.readDelayCAt(8,x)),this.writeDelay(9,this.readDelayCAt(8,x)-h*_),this._lp3+=u*(this.readDelay(9)-this._lp3),_=this.writeDelay(10,l*this._lp3-y*this.readDelay(10)),this.writeDelay(11,this.readDelay(10)+y*_),i=this.readDelayAt(9,this._taps[0])+this.readDelayAt(9,this._taps[1])-this.readDelayAt(10,this._taps[2])+this.readDelayAt(11,this._taps[3])-this.readDelayAt(5,this._taps[4])-this.readDelayAt(6,this._taps[5])-this.readDelayAt(7,this._taps[6]),b=this.readDelayAt(5,this._taps[7])+this.readDelayAt(5,this._taps[8])-this.readDelayAt(6,this._taps[9])+this.readDelayAt(7,this._taps[10])-this.readDelayAt(9,this._taps[11])-this.readDelayAt(10,this._taps[12])-this.readDelayAt(11,this._taps[13]),a[0][0][o]+=i*w,a[0][1][o]+=b*w,this._excPhase+=m,o++;for(let R=0,n=this._Delays[0];R<this._Delays.length;n=this._Delays[++R])n[1]=n[1]+1&n[3],n[2]=n[2]+1&n[3]}return this._pDWrite=(this._pDWrite+128)%this._pDLength,!0}};registerProcessor(\"DattorroReverb\",f);})();`;\n","import { PROCESSOR } from \"./processor.min\";\n\nconst PARAMS = [\n  \"preDelay\",\n  \"bandwidth\",\n  \"inputDiffusion1\",\n  \"inputDiffusion2\",\n  \"decay\",\n  \"decayDiffusion1\",\n  \"decayDiffusion2\",\n  \"damping\",\n  \"excursionRate\",\n  \"excursionDepth\",\n  \"wet\",\n  \"dry\",\n] as const;\n\nconst init = new WeakMap<AudioContext, Promise<void>>();\n\nasync function createDattorroReverbEffect(context: AudioContext) {\n  let ready = init.get(context);\n  if (!ready) {\n    const blob = new Blob([PROCESSOR], { type: \"application/javascript\" });\n    const url = URL.createObjectURL(blob);\n    ready = context.audioWorklet.addModule(url);\n    init.set(context, ready);\n  }\n  await ready;\n\n  const reverb = new AudioWorkletNode(context, \"DattorroReverb\", {\n    outputChannelCount: [2],\n  });\n  return reverb;\n}\n\nexport class Reverb {\n  #effect: AudioWorkletNode | undefined;\n  #ready: Promise<this>;\n  public readonly input: AudioNode;\n  #output: AudioNode;\n\n  constructor(context: AudioContext) {\n    this.input = context.createGain();\n    this.#output = context.destination;\n    this.#ready = createDattorroReverbEffect(context).then((reverb) => {\n      this.input.connect(reverb);\n      reverb.connect(this.#output);\n      this.#effect = reverb;\n      return this;\n    });\n  }\n\n  get paramNames() {\n    return PARAMS;\n  }\n\n  getParam(name: (typeof PARAMS)[number]): AudioParam | undefined {\n    return this.#effect?.parameters.get(\"preDelay\");\n  }\n\n  get isReady(): boolean {\n    return this.#effect !== undefined;\n  }\n\n  ready(): Promise<this> {\n    return this.#ready;\n  }\n\n  connect(output: AudioNode) {\n    if (this.#effect) {\n      this.#effect.disconnect(this.#output);\n      this.#effect.connect(output);\n    }\n    this.#output = output;\n  }\n}\n","import { DefaultPlayer } from \"./player/default-player\";\nimport {\n  AudioBuffers,\n  AudioBuffersLoader,\n  loadAudioBuffer,\n} from \"./player/load-audio\";\nimport { SampleStart, SampleStop } from \"./player/types\";\nimport { midiVelToGain } from \"./player/volume\";\nimport { HttpStorage, Storage } from \"./storage\";\n\nexport type SamplerConfig = {\n  storage?: Storage;\n  detune: number;\n  volume: number;\n  velocity: number;\n  decayTime?: number;\n  lpfCutoffHz?: number;\n  destination: AudioNode;\n\n  buffers: Record<string | number, string | AudioBuffers> | AudioBuffersLoader;\n  volumeToGain: (volume: number) => number;\n};\n\n/**\n * A Sampler instrument\n *\n * @private\n */\nexport class Sampler {\n  #options: SamplerConfig;\n  private readonly player: DefaultPlayer;\n  public readonly load: Promise<this>;\n\n  public constructor(\n    public readonly context: AudioContext,\n    options: Partial<SamplerConfig> = {}\n  ) {\n    this.#options = {\n      destination: options.destination ?? context.destination,\n      detune: 0,\n      volume: options.volume ?? 100,\n      velocity: options.velocity ?? 100,\n      buffers: options.buffers ?? {},\n      volumeToGain: options.volumeToGain ?? midiVelToGain,\n    };\n    this.player = new DefaultPlayer(context, this.#options);\n    const storage = options.storage ?? HttpStorage;\n    const loader =\n      typeof this.#options.buffers === \"function\"\n        ? this.#options.buffers\n        : createAudioBuffersLoader(this.#options.buffers, storage);\n    this.load = loader(context, this.player.buffers).then(() => this);\n  }\n\n  async loaded() {\n    console.warn(\"deprecated: use load instead\");\n    return this.load;\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  start(sample: SampleStart | string | number) {\n    return this.player.start(\n      typeof sample === \"object\" ? sample : { note: sample }\n    );\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    return this.player.stop(\n      typeof sample === \"object\"\n        ? sample\n        : sample === undefined\n        ? undefined\n        : { stopId: sample }\n    );\n  }\n\n  disconnect() {\n    return this.player.disconnect();\n  }\n}\n\nfunction createAudioBuffersLoader(\n  source: Record<string | number, string | AudioBuffers>,\n  storage: Storage\n): AudioBuffersLoader {\n  return async (context, buffers) => {\n    await Promise.all([\n      Object.keys(source).map(async (key) => {\n        const value = source[key];\n        if (value instanceof AudioBuffer) {\n          buffers[key] = value;\n        } else if (typeof value === \"string\") {\n          const buffer = await loadAudioBuffer(context, value, storage);\n          if (buffer) buffers[key] = buffer;\n        }\n      }),\n    ]);\n  };\n}\n","import { DefaultPlayer, DefaultPlayerConfig } from \"./player/default-player\";\nimport { createEmptyRegionGroup, findSamplesInRegions } from \"./player/layers\";\nimport { AudioBuffers } from \"./player/load-audio\";\nimport { toMidi } from \"./player/midi\";\nimport {\n  InternalPlayer,\n  RegionGroup,\n  SampleStart,\n  SampleStop,\n} from \"./player/types\";\nimport { SfzInstrumentLoader } from \"./sfz2\";\nimport { HttpStorage, Storage } from \"./storage\";\n\nexport function getSmolkenNames() {\n  return [\"Pizzicato\", \"Arco\", \"Switched\"];\n}\n\nfunction getSmolkenUrl(instrument: string) {\n  const FILES: Record<string, string> = {\n    Arco: \"arco\",\n    Pizzicato: \"pizz\",\n    Switched: \"switched\",\n  };\n  return `https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass/d_smolken_rubner_bass_${FILES[instrument]}.sfz`;\n}\n\nexport type SmolkenConfig = {\n  instrument: string;\n  storage: Storage;\n};\nexport type SmolkenOptions = Partial<SmolkenConfig & DefaultPlayerConfig>;\n\nexport class Smolken implements InternalPlayer {\n  private readonly player: DefaultPlayer;\n  private readonly group: RegionGroup;\n  public readonly load: Promise<this>;\n  private config: SmolkenConfig;\n  private seqNum = 0;\n\n  constructor(context: BaseAudioContext, options: SmolkenOptions = {}) {\n    this.config = {\n      instrument: options.instrument ?? \"Arco\",\n      storage: options.storage ?? HttpStorage,\n    };\n    this.player = new DefaultPlayer(context, options);\n    this.group = createEmptyRegionGroup();\n    const url = getSmolkenUrl(this.config.instrument);\n\n    const loader = SfzInstrumentLoader(url, {\n      buffers: this.player.buffers,\n      group: this.group,\n      urlFromSampleName: (sampleName, audioExt) => {\n        const samplePath = sampleName\n          .replace(\"\\\\\", \"/\")\n          .replace(\".wav\", audioExt);\n        return `https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass/${samplePath}`;\n      },\n    });\n    this.load = loader(context, this.config.storage).then(() => this);\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  get buffers(): AudioBuffers {\n    return this.player.buffers;\n  }\n\n  get context(): BaseAudioContext {\n    return this.player.context;\n  }\n\n  start(sample: SampleStart | string | number) {\n    const found = findSamplesInRegions(\n      this.group,\n      typeof sample === \"object\" ? sample : { note: sample },\n      this.seqNum\n    );\n    this.seqNum++;\n    const stopAll = found.map((sample) => this.player.start(sample));\n    return (time?: number) => stopAll.forEach((stop) => stop(time));\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    if (sample == undefined) {\n      this.player.stop();\n      return;\n    }\n\n    const toStop = typeof sample === \"object\" ? sample : { stopId: sample };\n    const midi = toMidi(toStop.stopId);\n    if (!midi) return;\n    toStop.stopId = midi;\n    this.player.stop(toStop);\n  }\n\n  disconnect(): void {\n    this.player.disconnect();\n  }\n}\n","import { spreadRegions } from \"../player/layers\";\nimport { AudioBuffers, findFirstSupportedFormat } from \"../player/load-audio\";\nimport { toMidi } from \"../player/midi\";\nimport { RegionGroup } from \"../player/types\";\nimport { Storage } from \"../storage\";\n\nexport function gleitzKitUrl(name: string, kit: string) {\n  const format = findFirstSupportedFormat([\"ogg\", \"mp3\"]) ?? \"mp3\";\n  return `https://gleitz.github.io/midi-js-soundfonts/${kit}/${name}-${format}.js`;\n}\n\nexport function soundfontInstrumentLoader(\n  url: string,\n  buffers: AudioBuffers,\n  group: RegionGroup\n) {\n  return async (context: BaseAudioContext, storage: Storage) => {\n    const sourceFile = await (await storage.fetch(url)).text();\n    const json = midiJsToJson(sourceFile);\n\n    const noteNames = Object.keys(json);\n    await Promise.all(\n      noteNames.map(async (noteName) => {\n        const midi = toMidi(noteName);\n        if (!midi) return;\n        const audioData = base64ToArrayBuffer(\n          removeBase64Prefix(json[noteName])\n        );\n        const buffer = await context.decodeAudioData(audioData);\n        buffers[noteName] = buffer;\n        group.regions.push({\n          sampleName: noteName,\n          midiPitch: midi,\n        });\n      })\n    );\n    spreadRegions(group.regions);\n  };\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson(source: string) {\n  const header = source.indexOf(\"MIDI.Soundfont.\");\n  if (header < 0) throw Error(\"Invalid MIDI.js Soundfont format\");\n  const start = source.indexOf(\"=\", header) + 2;\n  const end = source.lastIndexOf(\",\");\n  return JSON.parse(source.slice(start, end) + \"}\");\n}\n\nfunction removeBase64Prefix(audioBase64: string) {\n  return audioBase64.slice(audioBase64.indexOf(\",\") + 1);\n}\n\nfunction base64ToArrayBuffer(base64: string) {\n  const decoded = window.atob(base64);\n  const len = decoded.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = decoded.charCodeAt(i);\n  }\n  return bytes.buffer;\n}\n\nexport const SOUNDFONT_KITS = [\"MusyngKite\", \"FluidR3_GM\"];\n\nexport const SOUNDFONT_INSTRUMENTS = [\n  \"accordion\",\n  \"acoustic_bass\",\n  \"acoustic_grand_piano\",\n  \"acoustic_guitar_nylon\",\n  \"acoustic_guitar_steel\",\n  \"agogo\",\n  \"alto_sax\",\n  \"applause\",\n  \"bagpipe\",\n  \"banjo\",\n  \"baritone_sax\",\n  \"bassoon\",\n  \"bird_tweet\",\n  \"blown_bottle\",\n  \"brass_section\",\n  \"breath_noise\",\n  \"bright_acoustic_piano\",\n  \"celesta\",\n  \"cello\",\n  \"choir_aahs\",\n  \"church_organ\",\n  \"clarinet\",\n  \"clavinet\",\n  \"contrabass\",\n  \"distortion_guitar\",\n  \"drawbar_organ\",\n  \"dulcimer\",\n  \"electric_bass_finger\",\n  \"electric_bass_pick\",\n  \"electric_grand_piano\",\n  \"electric_guitar_clean\",\n  \"electric_guitar_jazz\",\n  \"electric_guitar_muted\",\n  \"electric_piano_1\",\n  \"electric_piano_2\",\n  \"english_horn\",\n  \"fiddle\",\n  \"flute\",\n  \"french_horn\",\n  \"fretless_bass\",\n  \"fx_1_rain\",\n  \"fx_2_soundtrack\",\n  \"fx_3_crystal\",\n  \"fx_4_atmosphere\",\n  \"fx_5_brightness\",\n  \"fx_6_goblins\",\n  \"fx_7_echoes\",\n  \"fx_8_scifi\",\n  \"glockenspiel\",\n  \"guitar_fret_noise\",\n  \"guitar_harmonics\",\n  \"gunshot\",\n  \"harmonica\",\n  \"harpsichord\",\n  \"helicopter\",\n  \"honkytonk_piano\",\n  \"kalimba\",\n  \"koto\",\n  \"lead_1_square\",\n  \"lead_2_sawtooth\",\n  \"lead_3_calliope\",\n  \"lead_4_chiff\",\n  \"lead_5_charang\",\n  \"lead_6_voice\",\n  \"lead_7_fifths\",\n  \"lead_8_bass__lead\",\n  \"marimba\",\n  \"melodic_tom\",\n  \"music_box\",\n  \"muted_trumpet\",\n  \"oboe\",\n  \"ocarina\",\n  \"orchestra_hit\",\n  \"orchestral_harp\",\n  \"overdriven_guitar\",\n  \"pad_1_new_age\",\n  \"pad_2_warm\",\n  \"pad_3_polysynth\",\n  \"pad_4_choir\",\n  \"pad_5_bowed\",\n  \"pad_6_metallic\",\n  \"pad_7_halo\",\n  \"pad_8_sweep\",\n  \"pan_flute\",\n  \"percussive_organ\",\n  \"piccolo\",\n  \"pizzicato_strings\",\n  \"recorder\",\n  \"reed_organ\",\n  \"reverse_cymbal\",\n  \"rock_organ\",\n  \"seashore\",\n  \"shakuhachi\",\n  \"shamisen\",\n  \"shanai\",\n  \"sitar\",\n  \"slap_bass_1\",\n  \"slap_bass_2\",\n  \"soprano_sax\",\n  \"steel_drums\",\n  \"string_ensemble_1\",\n  \"string_ensemble_2\",\n  \"synth_bass_1\",\n  \"synth_bass_2\",\n  \"synth_brass_1\",\n  \"synth_brass_2\",\n  \"synth_choir\",\n  \"synth_drum\",\n  \"synth_strings_1\",\n  \"synth_strings_2\",\n  \"taiko_drum\",\n  \"tango_accordion\",\n  \"telephone_ring\",\n  \"tenor_sax\",\n  \"timpani\",\n  \"tinkle_bell\",\n  \"tremolo_strings\",\n  \"trombone\",\n  \"trumpet\",\n  \"tuba\",\n  \"tubular_bells\",\n  \"vibraphone\",\n  \"viola\",\n  \"violin\",\n  \"voice_oohs\",\n  \"whistle\",\n  \"woodblock\",\n  \"xylophone\",\n];\n","import { toMidi } from \"../player/midi\";\n\nexport type LoopData = Record<number, [number, number]>;\n\nexport function getGoldstSoundfontLoopsUrl(instrument: string, kit: string) {\n  if (instrument.startsWith(\"http\")) return undefined;\n  return `https://goldst.dev/midi-js-soundfonts/${kit}/${instrument}-loop.json`;\n}\n\n/**\n *\n * @see https://github.com/goldst/midi-js-soundfonts\n * @see https://github.com/danigb/smplr/issues/23\n */\nexport async function fetchSoundfontLoopData(\n  url?: string\n): Promise<LoopData | undefined> {\n  if (!url) return undefined;\n  try {\n    const req = await fetch(url);\n    if (req.status !== 200) return;\n\n    const raw = await req.json();\n    const loopData: LoopData = {};\n    const sampleRate = 41000; // this is sample rate from the repository samples\n    Object.keys(raw).forEach((key) => {\n      const midi = toMidi(key);\n      if (midi) {\n        const offsets = raw[key];\n        loopData[midi] = [offsets[0] / sampleRate, offsets[1] / sampleRate];\n      }\n    });\n    return loopData;\n  } catch (err) {\n    return undefined;\n  }\n}\n","import { DefaultPlayer, DefaultPlayerConfig } from \"../player/default-player\";\nimport {\n  createEmptyRegionGroup,\n  findFirstSampleInRegions,\n} from \"../player/layers\";\nimport { AudioBuffers } from \"../player/load-audio\";\nimport { RegionGroup, SampleStart, SampleStop } from \"../player/types\";\nimport { HttpStorage, Storage } from \"../storage\";\nimport {\n  SOUNDFONT_INSTRUMENTS,\n  SOUNDFONT_KITS,\n  gleitzKitUrl,\n  soundfontInstrumentLoader,\n} from \"./soundfont-instrument\";\nimport {\n  fetchSoundfontLoopData,\n  getGoldstSoundfontLoopsUrl,\n} from \"./soundfont-loops\";\n\nexport function getSoundfontKits() {\n  return SOUNDFONT_KITS;\n}\n\nexport function getSoundfontNames() {\n  return SOUNDFONT_INSTRUMENTS;\n}\n\ntype SoundfontConfig = {\n  kit: \"FluidR3_GM\" | \"MusyngKite\" | string;\n  instrument?: string;\n  instrumentUrl: string;\n  storage: Storage;\n  extraGain: number;\n  loadLoopData: boolean;\n  loopDataUrl?: string;\n};\n\nexport type SoundfontOptions = Partial<SoundfontConfig & DefaultPlayerConfig>;\n\nexport class Soundfont {\n  public readonly config: Readonly<SoundfontConfig>;\n  private readonly player: DefaultPlayer;\n  public readonly load: Promise<this>;\n  public readonly group: RegionGroup;\n  #hasLoops: boolean;\n\n  constructor(\n    public readonly context: AudioContext,\n    options: SoundfontOptions\n  ) {\n    this.config = getSoundfontConfig(options);\n    this.player = new DefaultPlayer(context, options);\n    this.group = createEmptyRegionGroup();\n\n    this.#hasLoops = false;\n    const loader = soundfontLoader(\n      this.config.instrumentUrl,\n      this.config.loopDataUrl,\n      this.player.buffers,\n      this.group\n    );\n    this.load = loader(context, this.config.storage).then((hasLoops) => {\n      this.#hasLoops = hasLoops;\n      return this;\n    });\n\n    const gain = context.createGain();\n    gain.gain.value = this.config.extraGain;\n    this.player.output.addInsert(gain);\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  get hasLoops() {\n    return this.#hasLoops;\n  }\n\n  async loaded() {\n    console.warn(\"deprecated: use load instead\");\n    return this.load;\n  }\n\n  public disconnect() {\n    this.player.disconnect();\n  }\n\n  start(sample: SampleStart | string | number) {\n    const found = findFirstSampleInRegions(\n      this.group,\n      typeof sample === \"object\" ? sample : { note: sample }\n    );\n    if (!found) return () => undefined;\n\n    return this.player.start(found);\n  }\n\n  stop(sample?: SampleStop | string | number) {\n    return this.player.stop(sample);\n  }\n}\n\nfunction soundfontLoader(\n  url: string,\n  loopsUrl: string | undefined,\n  buffers: AudioBuffers,\n  group: RegionGroup\n) {\n  const loadInstrument = soundfontInstrumentLoader(url, buffers, group);\n  return async (context: BaseAudioContext, storage: Storage) => {\n    const [_, loops] = await Promise.all([\n      loadInstrument(context, storage),\n      fetchSoundfontLoopData(loopsUrl),\n    ]);\n\n    if (loops) {\n      group.regions.forEach((region) => {\n        const loop = loops[region.midiPitch];\n        if (loop) {\n          region.sample ??= {};\n          region.sample.loop = true;\n          region.sample.loopStart = loop[0];\n          region.sample.loopEnd = loop[1];\n        }\n      });\n    }\n    return !!loops;\n  };\n}\n\nfunction getSoundfontConfig(options: SoundfontOptions): SoundfontConfig {\n  if (!options.instrument && !options.instrumentUrl) {\n    throw Error(\"Soundfont: instrument or instrumentUrl is required\");\n  }\n  const config = {\n    kit: \"MusyngKite\",\n    instrument: options.instrument,\n    storage: options.storage ?? HttpStorage,\n    // This is to compensate the low volume of the original samples\n    extraGain: options.extraGain ?? 5,\n    loadLoopData: options.loadLoopData ?? false,\n    loopDataUrl: options.loopDataUrl,\n    instrumentUrl: options.instrumentUrl ?? \"\",\n  };\n  if (config.instrument && config.instrument.startsWith(\"http\")) {\n    console.warn(\n      \"Use 'instrumentUrl' instead of 'instrument' to load from a URL\"\n    );\n    config.instrumentUrl = config.instrument;\n    config.instrument = undefined;\n  }\n  if (config.instrument && !config.instrumentUrl) {\n    config.instrumentUrl = gleitzKitUrl(config.instrument, config.kit);\n  }\n\n  if (config.loadLoopData && config.instrument && !config.loopDataUrl) {\n    config.loopDataUrl = getGoldstSoundfontLoopsUrl(\n      config.instrument,\n      config.kit\n    );\n  }\n\n  return config;\n}\n","import { DefaultPlayer, DefaultPlayerConfig } from \"./player/default-player\";\nimport {\n  AudioBuffers,\n  AudioBuffersLoader,\n  findFirstSupportedFormat,\n  loadAudioBuffer,\n} from \"./player/load-audio\";\nimport { toMidi } from \"./player/midi\";\nimport { SampleStart, SampleStop } from \"./player/types\";\nimport { HttpStorage, Storage } from \"./storage\";\n\n/**\n * Splendid Grand Piano options\n */\nexport type SplendidGrandPianoConfig = {\n  baseUrl: string;\n  storage: Storage;\n  detune: number;\n  velocity: number;\n  decayTime: number;\n  notesToLoad?: {\n    notes: number[],\n    velocityRange: [number, number]\n  }\n} & Partial<DefaultPlayerConfig>;\n\nconst BASE_URL = \"https://danigb.github.io/samples/splendid-grand-piano\";\n\nexport class SplendidGrandPiano {\n  options: Readonly<SplendidGrandPianoConfig>;\n  private readonly player: DefaultPlayer;\n  public readonly load: Promise<this>;\n\n  constructor(\n    public readonly context: AudioContext,\n    options?: Partial<SplendidGrandPianoConfig>\n  ) {\n    this.options = Object.assign(\n      {\n        baseUrl: BASE_URL,\n        storage: HttpStorage,\n        detune: 0,\n        volume: 100,\n        velocity: 100,\n        decayTime: 0.5,\n      },\n      options\n    );\n    this.player = new DefaultPlayer(context, this.options);\n    const loader = splendidGrandPianoLoader(\n      this.options.baseUrl,\n      this.options.storage,\n      this.options.notesToLoad\n    );\n    this.load = loader(context, this.player.buffers).then(() => this);\n  }\n\n  get output() {\n    return this.player.output;\n  }\n\n  get buffers() {\n    return this.player.buffers;\n  }\n\n  async loaded() {\n    console.warn(\"deprecated: use load instead\");\n    return this.load;\n  }\n\n  start(sampleOrNote: SampleStart | number | string) {\n    const sample =\n      typeof sampleOrNote === \"object\"\n        ? { ...sampleOrNote }\n        : { note: sampleOrNote };\n\n    const found = this.#sampleToMidi(sample);\n    if (!found) return () => undefined;\n    sample.note = found[0];\n    sample.stopId = sample.stopId ?? found[1];\n    sample.detune = found[2] + (sample.detune ?? this.options.detune);\n    return this.player.start(sample);\n  }\n\n  #sampleToMidi(sample: SampleStart): [string, number, number] | undefined {\n    const midi = toMidi(sample.note);\n    if (!midi) return;\n\n    const vel = sample.velocity ?? this.options.velocity;\n    const layerIdx = LAYERS.findIndex(\n      (layer) => vel >= layer.vel_range[0] && vel <= layer.vel_range[1]\n    );\n    const layer = LAYERS[layerIdx];\n    if (!layer) return;\n\n    return findNearestMidiInLayer(layer.name, midi, this.player.buffers);\n  }\n\n  stop(sample?: SampleStop | number | string) {\n    return this.player.stop(sample);\n  }\n}\n\nfunction findNearestMidiInLayer(\n  prefix: string,\n  midi: number,\n  buffers: AudioBuffers\n): [string, number, number] {\n  let i = 0;\n  while (buffers[prefix + (midi + i)] === undefined && i < 128) {\n    if (i > 0) i = -i;\n    else i = -i + 1;\n  }\n\n  return i === 127\n    ? [prefix + midi, midi, 0]\n    : [prefix + (midi + i), midi, -i * 100];\n}\n\nfunction splendidGrandPianoLoader(\n  baseUrl: string,\n  storage: Storage,\n  notesToLoad?: {\n    notes: number[],\n    velocityRange: [number, number]\n  }\n): AudioBuffersLoader {\n  const format = findFirstSupportedFormat([\"ogg\", \"m4a\"]) ?? \"ogg\";\n  let layers = notesToLoad \n    ? LAYERS.filter(\n        (layer) =>\n          layer.vel_range[0] <= notesToLoad.velocityRange[1] &&\n          layer.vel_range[1] >= notesToLoad.velocityRange[0]\n      )\n    : LAYERS;\n\n  return async (context, buffers) => {\n    for (const layer of layers) {\n      const samples = notesToLoad \n        ? layer.samples.filter(sample => notesToLoad.notes.includes(sample[0] as number))\n        : layer.samples;\n\n      await Promise.all(\n        samples.map(async ([midi, name]) => {\n          const url = `${baseUrl}/${name}.${format}`;\n          const buffer = await loadAudioBuffer(context, url, storage);\n          if (buffer) buffers[layer.name + midi] = buffer;\n        })\n      );\n    }\n  };\n}\n\nexport const LAYERS = [\n  {\n    name: \"PPP\",\n    vel_range: [1, 40],\n    cutoff: 1000,\n    samples: [\n      [23, \"PP-B-1\"],\n      [27, \"PP-D#0\"],\n      [29, \"PP-F0\"],\n      [31, \"PP-G0\"],\n      [33, \"PP-A0\"],\n      [35, \"PP-B0\"],\n      [37, \"PP-C#1\"],\n      [38, \"PP-D1\"],\n      [40, \"PP-E1\"],\n      [41, \"PP-F1\"],\n      [43, \"PP-G1\"],\n      [45, \"PP-A1\"],\n      [47, \"PP-B1\"],\n      [48, \"PP-C2\"],\n      [50, \"PP-D2\"],\n      [52, \"PP-E2\"],\n      [53, \"PP-F2\"],\n      [55, \"PP-G2\"],\n      [56, \"PP-G#2\"],\n      [57, \"PP-A2\"],\n      [58, \"PP-A#2\"],\n      [59, \"PP-B2\"],\n      [60, \"PP-C3\"],\n      [62, \"PP-D3\"],\n      [64, \"PP-E3\"],\n      [65, \"PP-F3\"],\n      [67, \"PP-G3\"],\n      [69, \"PP-A3\"],\n      [71, \"PP-B3\"],\n      [72, \"PP-C4\"],\n      [74, \"PP-D4\"],\n      [76, \"PP-E4\"],\n      [77, \"PP-F4\"],\n      [79, \"PP-G4\"],\n      [80, \"PP-G#4\"],\n      [81, \"PP-A4\"],\n      [82, \"PP-A#4\"],\n      [83, \"PP-B4\"],\n      [85, \"PP-C#5\"],\n      [86, \"PP-D5\"],\n      [87, \"PP-D#5\"],\n      [89, \"PP-F5\"],\n      [90, \"PP-F#5\"],\n      [91, \"PP-G5\"],\n      [92, \"PP-G#5\"],\n      [93, \"PP-A5\"],\n      [94, \"PP-A#5\"],\n      [95, \"PP-B5\"],\n      [96, \"PP-C6\"],\n      [97, \"PP-C#6\"],\n      [98, \"PP-D6\"],\n      [99, \"PP-D#6\"],\n      [100, \"PP-E6\"],\n      [101, \"PP-F6\"],\n      [102, \"PP-F#6\"],\n      [103, \"PP-G6\"],\n      [104, \"PP-G#6\"],\n      [105, \"PP-A6\"],\n      [106, \"PP-A#6\"],\n      [107, \"PP-B6\"],\n      [108, \"PP-C7\"],\n    ],\n  },\n  {\n    name: \"PP\",\n    vel_range: [41, 67],\n    samples: [\n      [23, \"PP-B-1\"],\n      [27, \"PP-D#0\"],\n      [29, \"PP-F0\"],\n      [31, \"PP-G0\"],\n      [33, \"PP-A0\"],\n      [35, \"PP-B0\"],\n      [37, \"PP-C#1\"],\n      [38, \"PP-D1\"],\n      [40, \"PP-E1\"],\n      [41, \"PP-F1\"],\n      [43, \"PP-G1\"],\n      [45, \"PP-A1\"],\n      [47, \"PP-B1\"],\n      [48, \"PP-C2\"],\n      [50, \"PP-D2\"],\n      [52, \"PP-E2\"],\n      [53, \"PP-F2\"],\n      [55, \"PP-G2\"],\n      [56, \"PP-G#2\"],\n      [57, \"PP-A2\"],\n      [58, \"PP-A#2\"],\n      [59, \"PP-B2\"],\n      [60, \"PP-C3\"],\n      [62, \"PP-D3\"],\n      [64, \"PP-E3\"],\n      [65, \"PP-F3\"],\n      [67, \"PP-G3\"],\n      [69, \"PP-A3\"],\n      [71, \"PP-B3\"],\n      [72, \"PP-C4\"],\n      [74, \"PP-D4\"],\n      [76, \"PP-E4\"],\n      [77, \"PP-F4\"],\n      [79, \"PP-G4\"],\n      [80, \"PP-G#4\"],\n      [81, \"PP-A4\"],\n      [82, \"PP-A#4\"],\n      [83, \"PP-B4\"],\n      [85, \"PP-C#5\"],\n      [86, \"PP-D5\"],\n      [87, \"PP-D#5\"],\n      [89, \"PP-F5\"],\n      [90, \"PP-F#5\"],\n      [91, \"PP-G5\"],\n      [92, \"PP-G#5\"],\n      [93, \"PP-A5\"],\n      [94, \"PP-A#5\"],\n      [95, \"PP-B5\"],\n      [96, \"PP-C6\"],\n      [97, \"PP-C#6\"],\n      [98, \"PP-D6\"],\n      [99, \"PP-D#6\"],\n      [100, \"PP-E6\"],\n      [101, \"PP-F6\"],\n      [102, \"PP-F#6\"],\n      [103, \"PP-G6\"],\n      [104, \"PP-G#6\"],\n      [105, \"PP-A6\"],\n      [106, \"PP-A#6\"],\n      [107, \"PP-B6\"],\n      [108, \"PP-C7\"],\n    ],\n  },\n  {\n    name: \"MP\",\n    vel_range: [68, 84],\n    samples: [\n      [23, \"Mp-B-1\"],\n      [27, \"Mp-D#0\"],\n      [29, \"Mp-F0\"],\n      [31, \"Mp-G0\"],\n      [33, \"Mp-A0\"],\n      [35, \"Mp-B0\"],\n      [37, \"Mp-C#1\"],\n      [38, \"Mp-D1\"],\n      [40, \"Mp-E1\"],\n      [41, \"Mp-F1\"],\n      [43, \"Mp-G1\"],\n      [45, \"Mp-A1\"],\n      [47, \"Mp-B1\"],\n      [48, \"Mp-C2\"],\n      [50, \"Mp-D2\"],\n      [52, \"Mp-E2\"],\n      [53, \"Mp-F2\"],\n      [55, \"Mp-G2\"],\n      [56, \"Mp-G#2\"],\n      [57, \"Mp-A2\"],\n      [58, \"Mp-A#2\"],\n      [59, \"Mp-B2\"],\n      [60, \"Mp-C3\"],\n      [62, \"Mp-D3\"],\n      [64, \"Mp-E3\"],\n      [65, \"Mp-F3\"],\n      [67, \"Mp-G3\"],\n      [69, \"Mp-A3\"],\n      [71, \"Mp-B3\"],\n      [72, \"Mp-C4\"],\n      [74, \"Mp-D4\"],\n      [76, \"Mp-E4\"],\n      [77, \"Mp-F4\"],\n      [79, \"Mp-G4\"],\n      [80, \"Mp-G#4\"],\n      [81, \"Mp-A4\"],\n      [82, \"Mp-A#4\"],\n      [83, \"Mp-B4\"],\n      [85, \"Mp-C#5\"],\n      [86, \"Mp-D5\"],\n      [87, \"Mp-D#5\"],\n      [88, \"Mp-E5\"],\n      [89, \"Mp-F5\"],\n      [90, \"Mp-F#5\"],\n      [91, \"Mp-G5\"],\n      [92, \"Mp-G#5\"],\n      [93, \"Mp-A5\"],\n      [94, \"Mp-A#5\"],\n      [95, \"Mp-B5\"],\n      [96, \"Mp-C6\"],\n      [97, \"Mp-C#6\"],\n      [98, \"Mp-D6\"],\n      [99, \"Mp-D#6\"],\n      [100, \"PP-E6\"],\n      [101, \"Mp-F6\"],\n      [102, \"Mp-F#6\"],\n      [103, \"Mp-G6\"],\n      [104, \"Mp-G#6\"],\n      [105, \"Mp-A6\"],\n      [106, \"Mp-A#6\"],\n      [107, \"PP-B6\"],\n      [108, \"PP-C7\"],\n    ],\n  },\n  {\n    name: \"MF\",\n    vel_range: [85, 100],\n    samples: [\n      [23, \"Mf-B-1\"],\n      [27, \"Mf-D#0\"],\n      [29, \"Mf-F0\"],\n      [31, \"Mf-G0\"],\n      [33, \"Mf-A0\"],\n      [35, \"Mf-B0\"],\n      [37, \"Mf-C#1\"],\n      [38, \"Mf-D1\"],\n      [40, \"Mf-E1\"],\n      [41, \"Mf-F1\"],\n      [43, \"Mf-G1\"],\n      [45, \"Mf-A1\"],\n      [47, \"Mf-B1\"],\n      [48, \"Mf-C2\"],\n      [50, \"Mf-D2\"],\n      [52, \"Mf-E2\"],\n      [53, \"Mf-F2\"],\n      [55, \"Mf-G2\"],\n      [56, \"Mf-G#2\"],\n      [57, \"Mf-A2\"],\n      [58, \"Mf-A#2\"],\n      [59, \"Mf-B2\"],\n      [60, \"Mf-C3\"],\n      [62, \"Mf-D3\"],\n      [64, \"Mf-E3\"],\n      [65, \"Mf-F3\"],\n      [67, \"Mf-G3\"],\n      [69, \"Mf-A3\"],\n      [71, \"Mf-B3\"],\n      [72, \"Mf-C4\"],\n      [74, \"Mf-D4\"],\n      [76, \"Mf-E4\"],\n      [77, \"Mf-F4\"],\n      [79, \"Mf-G4\"],\n      [80, \"Mf-G#4\"],\n      [81, \"Mf-A4\"],\n      [82, \"Mf-A#4\"],\n      [83, \"Mf-B4\"],\n      [85, \"Mf-C#5\"],\n      [86, \"Mf-D5\"],\n      [87, \"Mf-D#5\"],\n      [88, \"Mf-E5\"],\n      [89, \"Mf-F5\"],\n      [90, \"Mf-F#5\"],\n      [91, \"Mf-G5\"],\n      [92, \"Mf-G#5\"],\n      [93, \"Mf-A5\"],\n      [94, \"Mf-A#5\"],\n      [95, \"Mf-B5\"],\n      [96, \"Mf-C6\"],\n      [97, \"Mf-C#6\"],\n      [98, \"Mf-D6\"],\n      [99, \"Mf-D#6\"],\n      [100, \"Mf-E6\"],\n      [101, \"Mf-F6\"],\n      [102, \"Mf-F#6\"],\n      [103, \"Mf-G6\"],\n      [104, \"Mf-G#6\"],\n      [105, \"Mf-A6\"],\n      [106, \"Mf-A#6\"],\n      [107, \"Mf-B6\"],\n      [108, \"PP-C7\"],\n    ],\n  },\n  {\n    name: \"FF\",\n    vel_range: [101, 127],\n    samples: [\n      [23, \"FF-B-1\"],\n      [27, \"FF-D#0\"],\n      [29, \"FF-F0\"],\n      [31, \"FF-G0\"],\n      [33, \"FF-A0\"],\n      [35, \"FF-B0\"],\n      [37, \"FF-C#1\"],\n      [38, \"FF-D1\"],\n      [40, \"FF-E1\"],\n      [41, \"FF-F1\"],\n      [43, \"FF-G1\"],\n      [45, \"FF-A1\"],\n      [47, \"FF-B1\"],\n      [48, \"FF-C2\"],\n      [50, \"FF-D2\"],\n      [52, \"FF-E2\"],\n      [53, \"FF-F2\"],\n      [55, \"FF-G2\"],\n      [56, \"FF-G#2\"],\n      [57, \"FF-A2\"],\n      [58, \"FF-A#2\"],\n      [59, \"FF-B2\"],\n      [60, \"FF-C3\"],\n      [62, \"FF-D3\"],\n      [64, \"FF-E3\"],\n      [65, \"FF-F3\"],\n      [67, \"FF-G3\"],\n      [69, \"FF-A3\"],\n      [71, \"FF-B3\"],\n      [72, \"FF-C4\"],\n      [74, \"FF-D4\"],\n      [76, \"FF-E4\"],\n      [77, \"FF-F4\"],\n      [79, \"FF-G4\"],\n      [80, \"FF-G#4\"],\n      [81, \"FF-A4\"],\n      [82, \"FF-A#4\"],\n      [83, \"FF-B4\"],\n      [85, \"FF-C#5\"],\n      [86, \"FF-D5\"],\n      [88, \"FF-E5\"],\n      [89, \"FF-F5\"],\n      [91, \"FF-G5\"],\n      [93, \"FF-A5\"],\n      [95, \"Mf-B5\"],\n      [96, \"Mf-C6\"],\n      [97, \"Mf-C#6\"],\n      [98, \"Mf-D6\"],\n      [99, \"Mf-D#6\"],\n      [100, \"Mf-E6\"],\n      [102, \"Mf-F#6\"],\n      [103, \"Mf-G6\"],\n      [104, \"Mf-G#6\"],\n      [105, \"Mf-A6\"],\n      [106, \"Mf-A#6\"],\n      [107, \"Mf-B6\"],\n      [108, \"Mf-C7\"],\n    ],\n  },\n];\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["volume","send","_config","sample","_disconnected","_a","canPlay","getConfig","instrument","urls","depth","INSTRUMENTS","SfzInstrumentLoader","mode","scope","group","BASE_URL","layer"],"version":3,"file":"index.5baa4167.js.map","sourceRoot":"/__parcel_source_root/"}